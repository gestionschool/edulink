import{a as o,o as r,s as g,m as w,c as n,p as C,i as $,e as m,G as V,k as _,b as e,F as B,h as A,x as i,t as l,j as L,J as S}from"./index-BVVU7ImF.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as N}from"./useEcoles-CKDL2If9.js";const R={},j={class:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-4 md:p-6"};function D(p,a){return r(),o("section",j,[g(p.$slots,"default")])}const E=M(R,[["render",D]]),F={class:"flex items-center gap-2"},P={key:0,class:"py-12 text-center text-slate-500"},T={key:1,class:"py-6 rounded-md border border-red-300 bg-red-50 px-4 text-red-700 dark:border-red-800 dark:bg-red-900/20 dark:text-red-300"},U={key:2,class:"py-12 text-center text-slate-500"},q={key:3,class:"overflow-x-auto rounded-xl border border-slate-200 dark:border-slate-800"},z={class:"min-w-full divide-y divide-slate-200 dark:divide-slate-800"},G={class:"divide-y divide-slate-200 dark:divide-slate-800"},H={class:"px-4 py-3"},J={class:"font-medium"},I={key:0,class:"text-xs text-slate-500 dark:text-slate-400"},K={key:0},O={key:1},Q={key:2},W={class:"px-4 py-3"},X={class:"px-4 py-3"},Y={class:"px-4 py-3"},Z={class:"px-4 py-3"},ee={class:"flex justify-end gap-2"},te=["onClick"],se=["onClick"],ae={__name:"EcolesList",setup(p){const a=N();V();const c=w(""),v=n(()=>a.loading),b=n(()=>a.error),h=n(()=>a.sorted),u=n(()=>{const d=c.value.trim().toLowerCase();return d?h.value.filter(s=>[s.nom,s.code,s.ville,s.directeur,s.email,s.telephone].filter(Boolean).join(" ").toLowerCase().includes(d)):h.value});function x(){a.fetchAll(!0)}function k(d){alert(`(MVP) Éditer #${d.id} – ${d.nom}`)}async function f(d){confirm(`Supprimer l'école "${d.nom}" ?`)&&await a.remove(d.id)}return C(()=>{a.fetchAll()}),(d,s)=>(r(),$(E,{title:"Écoles",subtitle:`${u.value.length} établissement(s)`},{actions:m(()=>[e("div",F,[L(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>c.value=t),type:"search",placeholder:"Rechercher (nom, code, ville, directeur)…",class:"w-64 max-w-[70vw] rounded-md border border-slate-300 bg-white px-3 py-2 text-sm placeholder-slate-400 focus:border-violet-500 focus:ring-1 focus:ring-violet-500 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100 dark:placeholder-slate-500 dark:focus:border-violet-400 dark:focus:ring-violet-400"},null,512),[[S,c.value]]),e("button",{class:"inline-flex items-center gap-2 rounded-md border px-3 py-2 text-sm border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800",onClick:x},[...s[1]||(s[1]=[e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M17.65 6.35A7.95 7.95 0 0 0 12 4V1L7 6l5 5V7a6 6 0 1 1-6 6H4a8 8 0 1 0 13.65-6.65z"})],-1),_(" Rafraîchir ",-1)])])])]),default:m(()=>[v.value?(r(),o("div",P,"Chargement…")):b.value?(r(),o("div",T,[s[2]||(s[2]=_(" Une erreur est survenue. ",-1)),e("button",{class:"underline",onClick:x},"Réessayer")])):u.value.length?(r(),o("div",q,[e("table",z,[s[3]||(s[3]=e("thead",{class:"bg-slate-50 dark:bg-slate-900/50"},[e("tr",{class:"text-left text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400"},[e("th",{class:"px-4 py-3"},"Nom"),e("th",{class:"px-4 py-3"},"Code"),e("th",{class:"px-4 py-3"},"Ville"),e("th",{class:"px-4 py-3"},"Directeur"),e("th",{class:"px-4 py-3 w-24 text-right"},"Actions")])],-1)),e("tbody",G,[(r(!0),o(B,null,A(u.value,t=>(r(),o("tr",{key:t.id,class:"text-sm"},[e("td",H,[e("div",J,l(t.nom||"—"),1),t.email||t.telephone?(r(),o("div",I,[t.email?(r(),o("span",K,l(t.email),1)):i("",!0),t.email&&t.telephone?(r(),o("span",O," • ")):i("",!0),t.telephone?(r(),o("span",Q,l(t.telephone),1)):i("",!0)])):i("",!0)]),e("td",W,l(t.code||"—"),1),e("td",X,l(t.ville||"—"),1),e("td",Y,l(t.directeur||"—"),1),e("td",Z,[e("div",ee,[e("button",{class:"rounded-md border border-slate-300 px-2 py-1 text-xs hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800",onClick:y=>k(t)},"Éditer",8,te),e("button",{class:"rounded-md border border-red-300 px-2 py-1 text-xs text-red-700 hover:bg-red-50 dark:border-red-800 dark:text-red-300 dark:hover:bg-red-900/20",onClick:y=>f(t)},"Suppr.",8,se)])])]))),128))])])])):(r(),o("div",U," Aucune école trouvée. "))]),_:1},8,["subtitle"]))}};export{ae as default};
