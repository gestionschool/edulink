import{c as x,m as f,r as y,a,b as e,z as C,j as u,I as g,L as h,F as p,h as m,x as I,o as r,t as n}from"./index-vgNnEmJo.js";import{u as L}from"./school-y-Km73Fy.js";const V={class:"space-y-4"},S={class:"flex flex-col sm:flex-row sm:items-end sm:justify-between gap-3"},N=["value"],q={class:"flex flex-wrap gap-2 items-center"},E=["value"],M={class:"overflow-x-auto rounded-xl border dark:border-slate-800"},U={class:"min-w-full text-sm"},j={class:"p-3"},B={class:"p-3"},F={class:"p-3"},A={class:"p-3"},D={class:"p-3 text-right"},T=["onClick"],z={key:0},J={__name:"ElevesList",setup(G){const d=L(),v=x(()=>d.classesView),k=o=>d.getClasse(o)?.libelle||d.getClasse(o)?.label||"—",c=f(""),i=f(0),b=x(()=>{const o=c.value.toLowerCase();return d.students.filter(s=>!i.value||s.classeId===i.value).filter(s=>!o||s.nom.toLowerCase().includes(o)||(s.matricule||"").toLowerCase().includes(o))}),l=y({nom:"",classeId:0});function _(){!l.nom||!l.classeId||(d.addEtudiant({nom:l.nom,classeId:Number(l.classeId)}),l.nom="",l.classeId=0)}function w(o){d.removeEtudiant(o)}return(o,s)=>(r(),a("section",V,[e("header",S,[s[6]||(s[6]=e("div",null,[e("h1",{class:"text-xl font-semibold"},"Élèves"),e("p",{class:"text-sm text-slate-500 dark:text-slate-400"},"Gestion des élèves")],-1)),e("form",{onSubmit:C(_,["prevent"]),class:"flex gap-2"},[u(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>l.nom=t),class:"px-3 py-2 rounded border dark:bg-slate-900",placeholder:"Nom élève",required:""},null,512),[[g,l.nom]]),u(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>l.classeId=t),class:"px-3 py-2 rounded border dark:bg-slate-900",required:""},[s[4]||(s[4]=e("option",{value:0,disabled:""},"— Classe —",-1)),(r(!0),a(p,null,m(v.value,t=>(r(),a("option",{key:t.id,value:t.id},n(t.libelle),9,N))),128))],512),[[h,l.classeId,void 0,{number:!0}]]),s[5]||(s[5]=e("button",{class:"px-3 py-2 rounded bg-indigo-600 text-white"},"Ajouter",-1))],32)]),e("div",q,[u(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>c.value=t),placeholder:"Rechercher…",class:"px-3 py-2 rounded border dark:bg-slate-900"},null,512),[[g,c.value]]),u(e("select",{"onUpdate:modelValue":s[3]||(s[3]=t=>i.value=t),class:"px-3 py-2 rounded border dark:bg-slate-900"},[s[7]||(s[7]=e("option",{value:0},"Toutes les classes",-1)),(r(!0),a(p,null,m(v.value,t=>(r(),a("option",{key:t.id,value:t.id},n(t.libelle),9,E))),128))],512),[[h,i.value,void 0,{number:!0}]])]),e("div",M,[e("table",U,[s[9]||(s[9]=e("thead",{class:"bg-slate-50 dark:bg-slate-900/50"},[e("tr",{class:"text-left"},[e("th",{class:"p-3"},"#"),e("th",{class:"p-3"},"Nom"),e("th",{class:"p-3"},"Matricule"),e("th",{class:"p-3"},"Classe"),e("th",{class:"p-3 w-1"})])],-1)),e("tbody",null,[(r(!0),a(p,null,m(b.value,t=>(r(),a("tr",{key:t.id,class:"border-t dark:border-slate-800"},[e("td",j,n(t.id),1),e("td",B,n(t.nom),1),e("td",F,n(t.matricule||"—"),1),e("td",A,n(k(t.classeId)),1),e("td",D,[e("button",{class:"text-red-600 hover:underline",onClick:R=>w(t.id)},"Supprimer",8,T)])]))),128)),b.value.length?I("",!0):(r(),a("tr",z,[...s[8]||(s[8]=[e("td",{colspan:"5",class:"p-4 text-center text-slate-500"},"Aucun élève",-1)])]))])])])]))}};export{J as default};
