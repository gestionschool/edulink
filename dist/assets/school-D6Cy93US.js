import{A as n}from"./index-sHYk9eTQ.js";const u=n("school",{state:()=>({students:[{id:1,nom:"Amina Kapinga",matricule:"EL-2025-001",photoUrl:"",classeId:11},{id:2,nom:"Patrick K.",matricule:"EL-2025-002",photoUrl:"",classeId:11}],classes:[{id:21,code:"6A",libelle:"6ème A",niveau:"6",filiere:"Scientifique",effectif:42,titulaire:"M. Kasa"},{id:22,code:"6B",libelle:"6ème B",niveau:"6",filiere:"Scientifique",effectif:40,titulaire:"M. Ilunga"},{id:23,code:"6C",libelle:"6ème C",niveau:"6",filiere:"Scientifique",effectif:38,titulaire:"Mme Tumba"},{id:11,code:"1SA",libelle:"1ère Scientifique A",niveau:"1",filiere:"Scientifique",effectif:30,titulaire:"—"}],periodes:[{id:101,label:"Semestre 1",dateDebut:"2025-09-01",dateFin:"2026-01-31",active:!0},{id:102,label:"Semestre 2",dateDebut:"2026-02-01",dateFin:"2026-06-30",active:!1}],teachers:[{id:1,nom:"Kabeya",prenom:"Paul",email:"paul@ecole.com",matiere:"Math",statut:"Actif"},{id:2,nom:"Ngoma",prenom:"Sophie",email:"sophie@ecole.com",matiere:"Physique",statut:"Actif"},{id:3,nom:"Mbuyi",prenom:"Jean",email:"jean@ecole.com",matiere:"Français",statut:"Inactif"},{id:4,nom:"Mukendi",prenom:"Alice",email:"alice@ecole.com",matiere:"SVT",statut:"Actif"}],cours:[{id:1,code:"MAT101",matiere:"Math",intitule:"Math Générales",classeId:21,teacherId:1,volume:48,periodeId:101},{id:2,code:"PHY102",matiere:"Physique",intitule:"Physique I",classeId:22,teacherId:2,volume:36,periodeId:101},{id:3,code:"FRN103",matiere:"Français",intitule:"Français Oral",classeId:21,teacherId:3,volume:24,periodeId:102},{id:4,code:"SVT104",matiere:"SVT",intitule:"SVT",classeId:23,teacherId:4,volume:30,periodeId:101}],evaluations:[{eleveId:1,periodeId:101,matiere:"Mathématiques",type:"Devoir",coef:2,note:14,obs:""},{eleveId:1,periodeId:101,matiere:"Mathématiques",type:"Examen",coef:3,note:12,obs:"Manque de rigueur"},{eleveId:1,periodeId:101,matiere:"Physique",type:"Interro",coef:1,note:13,obs:""},{eleveId:1,periodeId:101,matiere:"Physique",type:"Examen",coef:3,note:15,obs:""},{eleveId:1,periodeId:101,matiere:"Français",type:"Devoir",coef:1,note:11.5,obs:""},{eleveId:1,periodeId:101,matiere:"Français",type:"Examen",coef:2,note:10,obs:""},{eleveId:2,periodeId:101,matiere:"Mathématiques",type:"Devoir",coef:2,note:11,obs:""},{eleveId:2,periodeId:101,matiere:"Mathématiques",type:"Examen",coef:3,note:15,obs:""},{eleveId:2,periodeId:101,matiere:"Physique",type:"Interro",coef:1,note:12,obs:""},{eleveId:2,periodeId:101,matiere:"Physique",type:"Examen",coef:3,note:14,obs:""}],bulletinsMeta:[{eleveId:1,periodeId:101,observationsGenerales:"Ensemble satisfaisant, poursuivre les efforts en Mathématiques.",rank:5},{eleveId:2,periodeId:101,observationsGenerales:"Bon trimestre, participation active.",rank:3}],interros:[{id:1,titre:"Interro dérivées",type:"Surprise",date:"2025-10-03",coursId:1},{id:2,titre:"Interro vocabulaire",type:"Programmée",date:"2025-10-06",coursId:3},{id:3,titre:"Interro énergie",type:"Programmée",date:"2025-10-10",coursId:2}],examens:[{id:1,titre:"Examen T1",type:"Final",session:"Normale",date:"2025-11-20",coursId:1,bareme:20},{id:2,titre:"Examen T2",type:"Partiel",session:"Normale",date:"2025-12-05",coursId:2,bareme:15},{id:3,titre:"Examen Rattrapage Math",type:"Final",session:"Rattrapage",date:"2026-01-10",coursId:1,bareme:20},{id:4,titre:"Examen T1",type:"Partiel",session:"Normale",date:"2025-11-22",coursId:4,bareme:18},{id:5,titre:"Examen T2",type:"Final",session:"Normale",date:"2025-12-15",coursId:3,bareme:20},{id:6,titre:"Examen Rattrapage Physique",type:"Partiel",session:"Rattrapage",date:"2026-01-12",coursId:2,bareme:15}],devoirs:[{id:1,titre:"DM1 - Fonctions",dateRemise:"2025-10-05",coursId:1,bareme:20,statut:"Publié",periodeId:101},{id:2,titre:"TP – Cinématique",dateRemise:"2025-10-10",coursId:2,bareme:20,statut:"Publié",periodeId:101},{id:3,titre:"Rédaction 1",dateRemise:"2025-11-02",coursId:3,bareme:10,statut:"Archivé",periodeId:102}]}),getters:{classById:e=>Object.fromEntries(e.classes.map(t=>[t.id,t])),periodById:e=>Object.fromEntries(e.periodes.map(t=>[t.id,t])),teacherById:e=>Object.fromEntries(e.teachers.map(t=>[t.id,t])),coursById:e=>Object.fromEntries(e.cours.map(t=>[t.id,t])),getClasse:e=>t=>e.classes.find(s=>s.id===Number(t))||null,getPeriode:e=>t=>e.periodes.find(s=>s.id===Number(t))||null,getPeriodeLabel:e=>t=>e.periodes.find(s=>s.id===Number(t))?.label??"",getStudent:e=>t=>e.students.find(s=>s.id===Number(t))||null,getEleve:e=>t=>e.students.find(s=>s.id===Number(t))||null,teacherName(){return e=>{const t=this.teacherById[e];return t?t.nom||`${t.prenom??""} ${t.nom??""}`.trim():""}},classeLabel(){return e=>this.classById[e]?.label||""},coursMatiere(){return e=>this.coursById[e]?.matiere||""},coursClasseLabel(){return e=>{const t=this.coursById[e];return t?this.classeLabel(t.classeId):""}},coursPeriodeLabel(){return e=>{const t=this.coursById[e];return t?this.getPeriodeLabel(t.periodeId):""}},getEvaluations:e=>(t,s)=>e.evaluations.filter(i=>i.eleveId===Number(t)&&i.periodeId===Number(s)),getBulletinMeta:e=>(t,s)=>e.bulletinsMeta.find(i=>i.eleveId===Number(t)&&i.periodeId===Number(s))||{observationsGenerales:"",rank:null},getBulletin(){return(e,t)=>{const s=this.getStudent(e),i=s?this.getClasse(s.classeId):null,r=this.getPeriode(t),o=this.getEvaluations(e,t),a=this.getBulletinMeta(e,t);return{eleve:s,classe:i,periode:r,evaluations:o,...a}}},coursView(e){return e.cours.map(t=>({...t,classe:this.classeLabel(t.classeId),professeur:this.teacherName(t.teacherId),periode:this.getPeriodeLabel(t.periodeId)}))},interrosView(e){return e.interros.map(t=>{const s=this.coursById[t.coursId];return{...t,cours:s?.matiere||"",classe:s?this.classeLabel(s.classeId):"",bareme:t.bareme??10}})},examensView(e){return e.examens.map(t=>{const s=this.coursById[t.coursId];return{...t,cours:s?.matiere||"",classe:s?this.classeLabel(s.classeId):""}})},devoirsView(e){return e.devoirs.map(t=>{const s=this.coursById[t.coursId];return{...t,cours:s?.matiere||"",classe:s?this.classeLabel(s.classeId):"",periode:t.periodeId?this.getPeriodeLabel(t.periodeId):s?this.getPeriodeLabel(s.periodeId):""}})},classesView(e){return e.classes.map(t=>({id:t.id,code:t.code??"",libelle:t.libelle??t.label??"",niveau:t.niveau??"",filiere:t.filiere??"",effectif:Number(t.effectif??0),titulaire:t.titulaire??""}))},uniqueInterroCours(){return Array.from(new Set(this.interrosView.map(e=>e.cours).filter(Boolean))).sort()},uniqueInterroClasses(){return Array.from(new Set(this.interrosView.map(e=>e.classe).filter(Boolean))).sort()},uniqueExamCours(){return Array.from(new Set(this.examensView.map(e=>e.cours).filter(Boolean))).sort()},uniqueExamClasses(){return Array.from(new Set(this.examensView.map(e=>e.classe).filter(Boolean))).sort()},uniqueExamSessions(e){return Array.from(new Set(e.examens.map(t=>t.session).filter(Boolean))).sort()},uniqueDevoirCours(){return Array.from(new Set(this.devoirsView.map(e=>e.cours).filter(Boolean))).sort()},uniqueDevoirClasses(){return Array.from(new Set(this.devoirsView.map(e=>e.classe).filter(Boolean))).sort()},uniqueDevoirPeriodes(){return Array.from(new Set(this.devoirsView.map(e=>e.periode).filter(Boolean))).sort()},uniqueDevoirStatuts(e){return Array.from(new Set(e.devoirs.map(t=>t.statut).filter(Boolean))).sort()},uniqueCoursProfesseurs(){return Array.from(new Set(this.coursView.map(e=>e.professeur).filter(Boolean))).sort()},uniqueCoursClasses(){return Array.from(new Set(this.coursView.map(e=>e.classe).filter(Boolean))).sort()},uniqueCoursPeriodeLabels(){return Array.from(new Set(this.coursView.map(e=>e.periode).filter(Boolean))).sort()},uniqueClasseNiveaux(e){return Array.from(new Set(e.classes.map(t=>t.niveau).filter(Boolean))).sort()},uniqueClasseFilieres(e){return Array.from(new Set(e.classes.map(t=>t.filiere).filter(Boolean))).sort()},uniqueStudentClasses(e){const t=Object.fromEntries(e.classes.map(s=>[s.id,s.label]));return Array.from(new Set(e.students.map(s=>t[s.classeId]).filter(Boolean))).sort()}},actions:{addEtudiant(e){const t=this.students.reduce((i,r)=>Math.max(i,Number(r.id)||0),0),s=e.id??t+1;return this.students.push({id:s,matricule:"",nom:"",prenom:"",classeId:null,tuteur:"",telephone:"",statut:"Actif",...e}),s},updateEtudiant(e){const t=this.students.findIndex(s=>s.id===e.id);t>=0&&(this.students[t]={...this.students[t],...e})},removeEtudiant(e){this.students=this.students.filter(t=>t.id!==e)},addStudent(e){return this.addEtudiant(e)},updateStudent(e){return this.updateEtudiant(e)},removeStudent(e){return this.removeEtudiant(e)},upsertEvaluation(e){const t=this.evaluations.findIndex(s=>s.eleveId===e.eleveId&&s.periodeId===e.periodeId&&s.matiere===e.matiere&&s.type===e.type&&s.coef===e.coef);t>=0?this.evaluations[t]={...this.evaluations[t],...e}:this.evaluations.push(e)},setBulletinMeta(e,t,s){const i=this.bulletinsMeta.findIndex(r=>r.eleveId===e&&r.periodeId===t);i>=0?this.bulletinsMeta[i]={...this.bulletinsMeta[i],...s}:this.bulletinsMeta.push({eleveId:e,periodeId:t,...s})},addTeacher(e){const t=this.teachers.reduce((i,r)=>Math.max(i,Number(r.id)||0),0),s=e.id??t+1;return this.teachers.push({id:s,nom:"",prenom:"",email:"",matiere:"",statut:"Actif",...e}),s},updateTeacher(e){const t=this.teachers.findIndex(s=>s.id===e.id);t>=0&&(this.teachers[t]={...this.teachers[t],...e})},removeTeacher(e){this.cours=this.cours.map(t=>t.teacherId===e?{...t,teacherId:null}:t),this.teachers=this.teachers.filter(t=>t.id!==e)},addCours(e){const t=this.cours.reduce((i,r)=>Math.max(i,Number(r.id)||0),0),s=e.id??t+1;return this.cours.push({id:s,code:"",matiere:"",intitule:"",classeId:null,teacherId:null,volume:0,periodeId:null,...e}),s},updateCours(e){const t=this.cours.findIndex(s=>s.id===e.id);t>=0&&(this.cours[t]={...this.cours[t],...e})},removeCours(e){this.interros=this.interros.filter(t=>t.coursId!==e),this.examens=this.examens.filter(t=>t.coursId!==e),this.devoirs=this.devoirs.filter(t=>t.coursId!==e),this.cours=this.cours.filter(t=>t.id!==e)},addInterro(e){const t=this.interros.reduce((r,o)=>Math.max(r,Number(o.id)||0),0),s=e.id??t+1,i=this.resolveCoursId(e);return this.interros.push({id:s,titre:"",type:"Programmée",date:"",coursId:i,bareme:10,...e,coursId:i}),s},updateInterro(e){const t=this.interros.findIndex(s=>s.id===e.id);if(t>=0){const s=this.resolveCoursId({...this.interros[t],...e});this.interros[t]={...this.interros[t],...e,coursId:s}}},removeInterro(e){this.interros=this.interros.filter(t=>t.id!==e)},addExamen(e){const t=this.examens.reduce((r,o)=>Math.max(r,Number(o.id)||0),0),s=e.id??t+1,i=this.resolveCoursId(e);return this.examens.push({id:s,titre:"",type:"Final",session:"Normale",date:"",coursId:i,bareme:20,...e,coursId:i}),s},updateExamen(e){const t=this.examens.findIndex(s=>s.id===e.id);if(t>=0){const s=this.resolveCoursId({...this.examens[t],...e});this.examens[t]={...this.examens[t],...e,coursId:s}}},removeExamen(e){this.examens=this.examens.filter(t=>t.id!==e)},addDevoir(e){const t=this.devoirs.reduce((o,a)=>Math.max(o,Number(a.id)||0),0),s=e.id??t+1,i=this.resolveCoursId(e),r=e.periodeId??this.coursById[i]?.periodeId??null;return this.devoirs.push({id:s,titre:"",dateRemise:"",coursId:i,bareme:20,statut:"Publié",periodeId:r,...e,coursId:i,periodeId:r}),s},updateDevoir(e){const t=this.devoirs.findIndex(s=>s.id===e.id);if(t>=0){const s=this.resolveCoursId({...this.devoirs[t],...e}),i=e.periodeId??this.coursById[s]?.periodeId??this.devoirs[t].periodeId??null;this.devoirs[t]={...this.devoirs[t],...e,coursId:s,periodeId:i}}},removeDevoir(e){this.devoirs=this.devoirs.filter(t=>t.id!==e)},resolveCoursId(e){if(e.coursId)return Number(e.coursId);const t=e.cours||e.matiere,s=e.classeId,i=e.periodeId,r=e.teacherId;return this.cours.filter(a=>(!t||a.matiere===t)&&(!s||a.classeId===s)&&(!i||a.periodeId===i)&&(!r||a.teacherId===r))[0]?.id??null},addClasse(e){const t=this.classes.reduce((r,o)=>Math.max(r,Number(o.id)||0),0),s=e.id??t+1,i={id:s,code:"",libelle:"",niveau:"",filiere:"",effectif:0,titulaire:"",...e};return i.label=i.libelle||i.label||i.code||`Classe ${s}`,this.classes.push(i),s},updateClasse(e){const t=this.classes.findIndex(s=>s.id===e.id);if(t>=0){const s={...this.classes[t],...e};s.label=s.libelle||s.label||s.code||`Classe ${s.id}`,this.classes[t]=s}},removeClasse(e){this.students=this.students.map(s=>s.classeId===e?{...s,classeId:null}:s);const t=this.cours.filter(s=>s.classeId===e).map(s=>s.id);this.interros=this.interros.filter(s=>!t.includes(s.coursId)),this.examens=this.examens.filter(s=>!t.includes(s.coursId)),this.devoirs=this.devoirs.filter(s=>!t.includes(s.coursId)),this.cours=this.cours.filter(s=>s.classeId!==e),this.classes=this.classes.filter(s=>s.id!==e)}}});export{u};
