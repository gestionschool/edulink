import{r as w,f as m,g as T,o as t,h as b,a as o,i as v,w as u,c as l,F as g,j as p,t as k,k as x,d as f,v as c}from"./index-sHYk9eTQ.js";import{u as j}from"./school-D6Cy93US.js";import{_ as K}from"./PageHeader-D6nut-bz.js";import{_ as Q,a as G}from"./CrudModal-CzlkyKPl.js";import{_ as H}from"./DataTable-DtU7qz5G.js";import{A as J}from"./AppLayout-BRMBkRdv.js";const W={class:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors"},X={class:"mx-auto max-w-6xl p-4 sm:p-6"},Y=["value"],Z=["value"],ee=["value"],re={class:"rounded-xl border border-gray-200 bg-white p-3 shadow-sm dark:border-gray-700 dark:bg-gray-900"},oe={class:"grid gap-3 sm:grid-cols-2"},de={class:"text-gray-700 dark:text-gray-200"},se={class:"text-gray-700 dark:text-gray-200"},ae={class:"text-gray-700 dark:text-gray-200"},te={id:"classe-list"},ie=["value"],le={class:"text-gray-700 dark:text-gray-200"},ue={id:"prof-list"},ne=["value"],ge={class:"text-gray-700 dark:text-gray-200"},pe={class:"text-gray-700 dark:text-gray-200"},fe=["value"],we={__name:"CoursList",setup(ye){const n=j(),$=[{key:"code",label:"Code"},{key:"intitule",label:"Intitulé"},{key:"classe",label:"Classe"},{key:"professeur",label:"Professeur"},{key:"volume",label:"Volume h."},{key:"periode",label:"Période"}],a=w({q:"",professeur:"",classe:"",periodeId:""}),C=m(()=>n.uniqueCoursProfesseurs),h=m(()=>n.uniqueCoursClasses),I=m(()=>n.periodes);function V(s){return String(s||"").toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"")}const _=s=>n.getPeriodeLabel(s),q=m(()=>{const s=V(a.value.q),e=a.value.professeur,r=a.value.classe,P=a.value.periodeId===""?null:Number(a.value.periodeId);return n.cours.filter(i=>{const R=V(`${i.code} ${i.intitule} ${i.classe} ${i.professeur} ${i.volume} ${_(i.periodeId)}`),E=s?R.includes(s):!0,M=e?i.professeur===e:!0,z=r?i.classe===r:!0,A=P?i.periodeId===P:!0;return E&&M&&z&&A}).map(i=>({...i,periode:_(i.periodeId)}))}),y=w(!1),d=w({id:null,code:"",intitule:"",classe:"",professeur:"",volume:0,periodeId:null});function U(){a.value={q:"",professeur:"",classe:"",periodeId:""}}function F(){d.value={id:null,code:"",intitule:"",classe:"",professeur:"",volume:0,periodeId:null},y.value=!0}function L(s){d.value={id:s.id,code:s.code,intitule:s.intitule,classe:s.classe,professeur:s.professeur,volume:s.volume,periodeId:s.periodeId??null},y.value=!0}function N(){d.value.id?B():S(),y.value=!1}function S(){n.addCours({...d.value})}function B(){n.updateCours({...d.value})}function D(s){n.removeCours(s.id)}function O(){}return(s,e)=>(t(),T(J,null,{default:b(()=>[o("div",W,[o("div",X,[v(K,{title:"Cours"},{actions:b(()=>[o("button",{class:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-indigo-500 dark:hover:bg-indigo-600 dark:focus:ring-indigo-400",onClick:e[0]||(e[0]=r=>F())}," Nouveau ")]),_:1}),v(Q,{modelValue:a.value,"onUpdate:modelValue":e[4]||(e[4]=r=>a.value=r),onReset:U},{default:b(()=>[u(o("select",{"onUpdate:modelValue":e[1]||(e[1]=r=>a.value.professeur=r),class:"rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 dark:focus:border-indigo-400 dark:focus:ring-indigo-400"},[e[12]||(e[12]=o("option",{value:""},"Professeur",-1)),(t(!0),l(g,null,p(C.value,r=>(t(),l("option",{key:r,value:r},k(r),9,Y))),128))],512),[[x,a.value.professeur]]),u(o("select",{"onUpdate:modelValue":e[2]||(e[2]=r=>a.value.classe=r),class:"rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 dark:focus:border-indigo-400 dark:focus:ring-indigo-400"},[e[13]||(e[13]=o("option",{value:""},"Classe",-1)),(t(!0),l(g,null,p(h.value,r=>(t(),l("option",{key:r,value:r},k(r),9,Z))),128))],512),[[x,a.value.classe]]),u(o("select",{"onUpdate:modelValue":e[3]||(e[3]=r=>a.value.periodeId=r),class:"rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 dark:focus:border-indigo-400 dark:focus:ring-indigo-400"},[e[14]||(e[14]=o("option",{value:""},"Période",-1)),(t(!0),l(g,null,p(I.value,r=>(t(),l("option",{key:r.id,value:r.id},k(r.label),9,ee))),128))],512),[[x,a.value.periodeId,void 0,{number:!0}]]),o("button",{class:"rounded-md border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:border-gray-600 dark:text-gray-200 dark:hover:bg-gray-700 dark:focus:ring-indigo-400",onClick:O}," Filtrer ")]),_:1},8,["modelValue"]),o("div",re,[v(H,{rows:q.value,headers:$,idKey:"id",onEdit:L,onRemove:D},null,8,["rows"])]),v(G,{open:y.value,title:d.value.id?"Modifier cours":"Créer cours",onClose:e[11]||(e[11]=r=>y.value=!1),onSubmit:N},{default:b(()=>[o("div",oe,[o("label",de,[e[15]||(e[15]=f(" Code ",-1)),u(o("input",{"onUpdate:modelValue":e[5]||(e[5]=r=>d.value.code=r),class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm placeholder-gray-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 dark:focus:border-indigo-400 dark:focus:ring-indigo-400",required:""},null,512),[[c,d.value.code]])]),o("label",se,[e[16]||(e[16]=f(" Intitulé ",-1)),u(o("input",{"onUpdate:modelValue":e[6]||(e[6]=r=>d.value.intitule=r),class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm placeholder-gray-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 dark:focus:border-indigo-400 dark:focus:ring-indigo-400",required:""},null,512),[[c,d.value.intitule]])]),o("label",ae,[e[17]||(e[17]=f(" Classe ",-1)),u(o("input",{"onUpdate:modelValue":e[7]||(e[7]=r=>d.value.classe=r),list:"classe-list",class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm placeholder-gray-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 dark:focus:border-indigo-400 dark:focus:ring-indigo-400",required:""},null,512),[[c,d.value.classe]]),o("datalist",te,[(t(!0),l(g,null,p(h.value,r=>(t(),l("option",{key:r,value:r},null,8,ie))),128))])]),o("label",le,[e[18]||(e[18]=f(" Professeur ",-1)),u(o("input",{"onUpdate:modelValue":e[8]||(e[8]=r=>d.value.professeur=r),list:"prof-list",class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm placeholder-gray-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 dark:focus:border-indigo-400 dark:focus:ring-indigo-400",required:""},null,512),[[c,d.value.professeur]]),o("datalist",ue,[(t(!0),l(g,null,p(C.value,r=>(t(),l("option",{key:r,value:r},null,8,ne))),128))])]),o("label",ge,[e[19]||(e[19]=f(" Volume horaire ",-1)),u(o("input",{"onUpdate:modelValue":e[9]||(e[9]=r=>d.value.volume=r),type:"number",min:"1",class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm placeholder-gray-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 dark:focus:border-indigo-400 dark:focus:ring-indigo-400"},null,512),[[c,d.value.volume,void 0,{number:!0}]])]),o("label",pe,[e[21]||(e[21]=f(" Période ",-1)),u(o("select",{"onUpdate:modelValue":e[10]||(e[10]=r=>d.value.periodeId=r),class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:focus:border-indigo-400 dark:focus:ring-indigo-400"},[e[20]||(e[20]=o("option",{value:null},"—",-1)),(t(!0),l(g,null,p(I.value,r=>(t(),l("option",{key:r.id,value:r.id},k(r.label),9,fe))),128))],512),[[x,d.value.periodeId,void 0,{number:!0}]])])])]),_:1},8,["open","title"])])])]),_:1}))}};export{we as default};
