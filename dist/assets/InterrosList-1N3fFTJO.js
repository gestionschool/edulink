import{r as I,m as v,c as S,a as r,b as e,z as V,k as i,I as k,J as b,F as u,h as p,f as c,x as w,o as n,t as l,n as y}from"./index-Dl0Akbo7.js";import{u as T}from"./school-BFulR-LP.js";const U={class:"space-y-5"},q={class:"flex flex-col sm:flex-row sm:items-end sm:justify-between gap-4"},j=["value"],D={class:"flex flex-wrap gap-2"},A={class:"sm:hidden space-y-3"},B={class:"flex items-start justify-between gap-3"},L={class:"min-w-0"},M={class:"font-semibold truncate"},N={class:"text-sm text-slate-600 dark:text-slate-400 truncate"},P={class:"mt-2 flex items-center gap-2 text-xs text-slate-600 dark:text-slate-400"},z={class:"flex flex-col items-end gap-2 shrink-0"},F=["onClick"],$={key:0,class:"rounded-xl border dark:border-slate-800 p-4 text-center text-slate-500"},E={class:"hidden sm:block overflow-x-auto rounded-xl border dark:border-slate-800"},J={class:"min-w-full text-sm"},O={class:"p-3 font-medium truncate"},G={class:"p-3"},H={class:"p-3"},K={class:"p-3 truncate"},Q={class:"p-3 hidden md:table-cell"},R={class:"p-3 text-right"},W=["onClick"],X={key:0},te={__name:"InterrosList",setup(Y){const a=T(),_=d=>a.getClasse(d)?.libelle||a.getClasse(d)?.label||"—",o=I({titre:"",type:"Programmée",date:"",coursId:0});function h(){!o.titre||!o.date||!o.coursId||(a.addInterro({...o,coursId:Number(o.coursId)}),Object.assign(o,{titre:"",type:"Programmée",date:"",coursId:0}))}const m=v(""),x=v(""),f=S(()=>a.interrosView.filter(d=>(!m.value||d.cours===m.value)&&(!x.value||d.classe===x.value)));function g(d){return d==="Surprise"?"bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-200":"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/40 dark:text-indigo-200"}return(d,s)=>(n(),r("section",U,[e("header",q,[s[9]||(s[9]=e("div",null,[e("h1",{class:"text-xl font-semibold"},"Interrogations"),e("p",{class:"text-sm text-slate-500 dark:text-slate-400"},"Contrôles rapides")],-1)),e("form",{onSubmit:V(h,["prevent"]),class:"flex flex-wrap gap-2"},[i(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>o.titre=t),placeholder:"Titre",class:"w-full sm:w-auto sm:flex-1 min-w-[180px] px-3 py-2 rounded border dark:bg-slate-900 focus:outline-none focus:ring-2 focus:ring-indigo-500/50",required:""},null,512),[[k,o.titre]]),i(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>o.date=t),type:"date",class:"w-full sm:w-auto min-w-[160px] px-3 py-2 rounded border dark:bg-slate-900 focus:outline-none focus:ring-2 focus:ring-indigo-500/50",required:""},null,512),[[k,o.date]]),i(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>o.coursId=t),class:"w-full sm:w-auto min-w-[220px] px-3 py-2 rounded border dark:bg-slate-900 focus:outline-none focus:ring-2 focus:ring-indigo-500/50",required:""},[s[6]||(s[6]=e("option",{value:0,disabled:""},"— Cours —",-1)),(n(!0),r(u,null,p(c(a).cours,t=>(n(),r("option",{key:t.id,value:t.id},l(t.matiere)+" — "+l(_(t.classeId)),9,j))),128))],512),[[b,o.coursId,void 0,{number:!0}]]),i(e("select",{"onUpdate:modelValue":s[3]||(s[3]=t=>o.type=t),class:"w-full sm:w-auto min-w-[160px] px-3 py-2 rounded border dark:bg-slate-900 focus:outline-none focus:ring-2 focus:ring-indigo-500/50"},[...s[7]||(s[7]=[e("option",null,"Programmée",-1),e("option",null,"Surprise",-1)])],512),[[b,o.type]]),s[8]||(s[8]=e("button",{class:"w-full sm:w-auto px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 transition"}," Ajouter ",-1))],32)]),e("div",D,[i(e("select",{"onUpdate:modelValue":s[4]||(s[4]=t=>m.value=t),class:"w-full sm:w-auto min-w-[180px] px-3 py-2 rounded border dark:bg-slate-900"},[s[10]||(s[10]=e("option",{value:""},"Tous cours",-1)),(n(!0),r(u,null,p(c(a).uniqueInterroCours,t=>(n(),r("option",{key:t},l(t),1))),128))],512),[[b,m.value]]),i(e("select",{"onUpdate:modelValue":s[5]||(s[5]=t=>x.value=t),class:"w-full sm:w-auto min-w-[160px] px-3 py-2 rounded border dark:bg-slate-900"},[s[11]||(s[11]=e("option",{value:""},"Toutes classes",-1)),(n(!0),r(u,null,p(c(a).uniqueInterroClasses,t=>(n(),r("option",{key:t},l(t),1))),128))],512),[[b,x.value]])]),e("ul",A,[(n(!0),r(u,null,p(f.value,t=>(n(),r("li",{key:t.id,class:"rounded-xl border dark:border-slate-800 bg-white dark:bg-slate-900 p-4"},[e("div",B,[e("div",L,[e("h3",M,l(t.titre),1),e("p",N,l(t.cours)+" — "+l(t.classe),1),e("div",P,[e("span",null,"Date : "+l(t.date),1)])]),e("div",z,[e("span",{class:y(["px-2 py-0.5 text-xs rounded-full",g(t.type)])},l(t.type),3),e("button",{class:"text-xs text-red-600 hover:underline",onClick:C=>c(a).removeInterro(t.id)},"Supprimer",8,F)])])]))),128)),f.value.length?w("",!0):(n(),r("li",$," Aucune interro "))]),e("div",E,[e("table",J,[s[13]||(s[13]=e("thead",{class:"bg-slate-50 dark:bg-slate-900/50"},[e("tr",{class:"text-left"},[e("th",{class:"p-3"},"Titre"),e("th",{class:"p-3"},"Type"),e("th",{class:"p-3"},"Date"),e("th",{class:"p-3"},"Cours"),e("th",{class:"p-3 hidden md:table-cell"},"Classe"),e("th",{class:"p-3 w-1"})])],-1)),e("tbody",null,[(n(!0),r(u,null,p(f.value,t=>(n(),r("tr",{key:t.id,class:"border-t dark:border-slate-800"},[e("td",O,l(t.titre),1),e("td",G,[e("span",{class:y(["px-2 py-0.5 text-xs rounded-full",g(t.type)])},l(t.type),3)]),e("td",H,l(t.date),1),e("td",K,l(t.cours),1),e("td",Q,l(t.classe),1),e("td",R,[e("button",{class:"text-red-600 hover:underline",onClick:C=>c(a).removeInterro(t.id)},"Supprimer",8,W)])]))),128)),f.value.length?w("",!0):(n(),r("tr",X,[...s[12]||(s[12]=[e("td",{colspan:"6",class:"p-4 text-center text-slate-500"},"Aucune interro",-1)])]))])])])]))}};export{te as default};
