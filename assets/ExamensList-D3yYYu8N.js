import{r as E,m as w,c as I,a as n,b as e,z as U,j as i,I as k,L as u,F as p,h as m,f as x,x as C,o as r,t as o,n as v}from"./index-vgNnEmJo.js";import{u as T}from"./school-y-Km73Fy.js";const j={class:"space-y-5"},q={class:"flex flex-col sm:flex-row sm:items-end sm:justify-between gap-4"},N=["value"],F={class:"flex flex-wrap gap-2"},B={class:"sm:hidden space-y-3"},D={class:"flex items-start justify-between gap-3"},L={class:"min-w-0"},A={class:"font-semibold truncate"},M={class:"text-sm text-slate-600 dark:text-slate-400 truncate"},z={class:"mt-2 flex flex-wrap items-center gap-2 text-xs text-slate-600 dark:text-slate-400"},P={class:"flex items-center gap-2"},R=["onClick"],$={key:0,class:"rounded-xl border dark:border-slate-800 p-4 text-center text-slate-500"},O={class:"hidden sm:block overflow-x-auto rounded-xl border dark:border-slate-800"},G={class:"min-w-full text-sm"},H={class:"p-3 font-medium truncate"},J={class:"p-3"},K={class:"p-3"},Q={class:"p-3"},W={class:"p-3 truncate"},X={class:"p-3 hidden md:table-cell"},Y={class:"p-3 text-right"},Z=["onClick"],ee={key:0},oe={__name:"ExamensList",setup(se){const d=T(),_=a=>d.getClasse(a)?.libelle||d.getClasse(a)?.label||"—",l=E({titre:"",type:"Final",session:"Normale",date:"",coursId:0,bareme:20});function V(){!l.titre||!l.date||!l.coursId||(d.addExamen({...l,coursId:Number(l.coursId)}),Object.assign(l,{titre:"",type:"Final",session:"Normale",date:"",coursId:0,bareme:20}))}const c=w(""),b=w(""),f=w(""),g=I(()=>d.examensView.filter(a=>(!c.value||a.cours===c.value)&&(!b.value||a.classe===b.value)&&(!f.value||a.session===f.value)));function y(a){return a==="Partiel"?"bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-200":"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/40 dark:text-indigo-200"}function h(a){return a==="Rattrapage"?"bg-rose-100 text-rose-700 dark:bg-rose-900/40 dark:text-rose-200":"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-200"}return(a,t)=>(r(),n("section",j,[e("header",q,[t[13]||(t[13]=e("div",null,[e("h1",{class:"text-xl font-semibold"},"Examens"),e("p",{class:"text-sm text-slate-500 dark:text-slate-400"},"Évaluations majeures")],-1)),e("form",{onSubmit:U(V,["prevent"]),class:"flex flex-wrap gap-2"},[i(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.titre=s),placeholder:"Titre",class:"w-full sm:w-auto sm:flex-1 min-w-[180px] px-3 py-2 rounded border dark:bg-slate-900 focus:outline-none focus:ring-2 focus:ring-indigo-500/50",required:""},null,512),[[k,l.titre]]),i(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.date=s),type:"date",class:"w-full sm:w-auto min-w-[160px] px-3 py-2 rounded border dark:bg-slate-900 focus:outline-none focus:ring-2 focus:ring-indigo-500/50",required:""},null,512),[[k,l.date]]),i(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.coursId=s),class:"w-full sm:w-auto min-w-[220px] px-3 py-2 rounded border dark:bg-slate-900 focus:outline-none focus:ring-2 focus:ring-indigo-500/50",required:""},[t[9]||(t[9]=e("option",{value:0,disabled:""},"— Cours —",-1)),(r(!0),n(p,null,m(x(d).cours,s=>(r(),n("option",{key:s.id,value:s.id},o(s.matiere)+" — "+o(_(s.classeId)),9,N))),128))],512),[[u,l.coursId,void 0,{number:!0}]]),i(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.type=s),class:"w-full sm:w-auto min-w-[140px] px-3 py-2 rounded border dark:bg-slate-900 focus:outline-none focus:ring-2 focus:ring-indigo-500/50"},[...t[10]||(t[10]=[e("option",null,"Final",-1),e("option",null,"Partiel",-1)])],512),[[u,l.type]]),i(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.session=s),class:"w-full sm:w-auto min-w-[160px] px-3 py-2 rounded border dark:bg-slate-900 focus:outline-none focus:ring-2 focus:ring-indigo-500/50"},[...t[11]||(t[11]=[e("option",null,"Normale",-1),e("option",null,"Rattrapage",-1)])],512),[[u,l.session]]),i(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>l.bareme=s),type:"number",min:"1",placeholder:"Barème",class:"w-full sm:w-24 px-3 py-2 rounded border dark:bg-slate-900 focus:outline-none focus:ring-2 focus:ring-indigo-500/50"},null,512),[[k,l.bareme,void 0,{number:!0}]]),t[12]||(t[12]=e("button",{class:"w-full sm:w-auto px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 transition"}," Ajouter ",-1))],32)]),e("div",F,[i(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>c.value=s),class:"w-full sm:w-auto min-w-[180px] px-3 py-2 rounded border dark:bg-slate-900"},[t[14]||(t[14]=e("option",{value:""},"Tous cours",-1)),(r(!0),n(p,null,m(x(d).uniqueExamCours,s=>(r(),n("option",{key:s},o(s),1))),128))],512),[[u,c.value]]),i(e("select",{"onUpdate:modelValue":t[7]||(t[7]=s=>b.value=s),class:"w-full sm:w-auto min-w-[160px] px-3 py-2 rounded border dark:bg-slate-900"},[t[15]||(t[15]=e("option",{value:""},"Toutes classes",-1)),(r(!0),n(p,null,m(x(d).uniqueExamClasses,s=>(r(),n("option",{key:s},o(s),1))),128))],512),[[u,b.value]]),i(e("select",{"onUpdate:modelValue":t[8]||(t[8]=s=>f.value=s),class:"w-full sm:w-auto min-w-[160px] px-3 py-2 rounded border dark:bg-slate-900"},[t[16]||(t[16]=e("option",{value:""},"Toutes sessions",-1)),(r(!0),n(p,null,m(x(d).uniqueExamSessions,s=>(r(),n("option",{key:s},o(s),1))),128))],512),[[u,f.value]])]),e("ul",B,[(r(!0),n(p,null,m(g.value,s=>(r(),n("li",{key:s.id,class:"rounded-xl border dark:border-slate-800 bg-white dark:bg-slate-900 p-4"},[e("div",D,[e("div",L,[e("h3",A,o(s.titre),1),e("p",M,o(s.cours)+" — "+o(s.classe),1),e("div",z,[e("span",null,"Date : "+o(s.date),1),t[17]||(t[17]=e("span",{class:"mx-1 hidden xs:inline"},"•",-1)),e("span",P,[e("span",{class:v(["px-2 py-0.5 rounded-full",y(s.type)])},o(s.type),3),e("span",{class:v(["px-2 py-0.5 rounded-full",h(s.session)])},o(s.session),3)])])]),e("button",{class:"text-xs text-red-600 hover:underline shrink-0",onClick:S=>x(d).removeExamen(s.id)},"Supprimer",8,R)])]))),128)),g.value.length?C("",!0):(r(),n("li",$," Aucun examen "))]),e("div",O,[e("table",G,[t[19]||(t[19]=e("thead",{class:"bg-slate-50 dark:bg-slate-900/50"},[e("tr",{class:"text-left"},[e("th",{class:"p-3"},"Titre"),e("th",{class:"p-3"},"Type"),e("th",{class:"p-3"},"Session"),e("th",{class:"p-3"},"Date"),e("th",{class:"p-3"},"Cours"),e("th",{class:"p-3 hidden md:table-cell"},"Classe"),e("th",{class:"p-3 w-1"})])],-1)),e("tbody",null,[(r(!0),n(p,null,m(g.value,s=>(r(),n("tr",{key:s.id,class:"border-t dark:border-slate-800"},[e("td",H,o(s.titre),1),e("td",J,[e("span",{class:v(["px-2 py-0.5 text-xs rounded-full",y(s.type)])},o(s.type),3)]),e("td",K,[e("span",{class:v(["px-2 py-0.5 text-xs rounded-full",h(s.session)])},o(s.session),3)]),e("td",Q,o(s.date),1),e("td",W,o(s.cours),1),e("td",X,o(s.classe),1),e("td",Y,[e("button",{class:"text-red-600 hover:underline",onClick:S=>x(d).removeExamen(s.id)},"Supprimer",8,Z)])]))),128)),g.value.length?C("",!0):(r(),n("tr",ee,[...t[18]||(t[18]=[e("td",{colspan:"7",class:"p-4 text-center text-slate-500"},"Aucun examen",-1)])]))])])])]))}};export{oe as default};
