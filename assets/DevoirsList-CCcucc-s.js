import{r as D,m as w,c as S,a as o,b as t,z as U,k as i,I as k,J as c,F as d,h as p,f as m,x as h,o as r,t as n,n as C}from"./index-C5nwF8dZ.js";import{u as P}from"./school-CTfOjOI2.js";const R={class:"space-y-5"},T={class:"flex flex-col sm:flex-row sm:items-end sm:justify-between gap-4"},q=["value"],j=["value"],A={class:"flex flex-wrap gap-2"},B={class:"sm:hidden space-y-3"},L={class:"flex items-start justify-between gap-3"},M={class:"min-w-0"},N={class:"font-semibold truncate"},z={class:"text-sm text-slate-600 dark:text-slate-400 truncate"},F={class:"mt-2 flex items-center gap-2 text-xs text-slate-600 dark:text-slate-400"},$={class:"flex flex-col items-end gap-2 shrink-0"},E=["onClick"],J={key:0,class:"rounded-xl border dark:border-slate-800 p-4 text-center text-slate-500"},O={class:"hidden sm:block overflow-x-auto rounded-xl border dark:border-slate-800"},G={class:"min-w-full text-sm"},H={class:"p-3 font-medium truncate"},K={class:"p-3 truncate"},Q={class:"p-3 hidden md:table-cell"},W={class:"p-3 hidden lg:table-cell"},X={class:"p-3"},Y={class:"p-3"},Z={class:"p-3 text-right"},ee=["onClick"],te={key:0},re={__name:"DevoirsList",setup(se){const u=P(),I=a=>u.getClasse(a)?.libelle||u.getClasse(a)?.label||"—",l=D({titre:"",dateRemise:"",coursId:0,bareme:20,statut:"Publié",periodeId:0});function _(){if(!l.titre||!l.dateRemise||!l.coursId)return;const a={...l,coursId:Number(l.coursId),periodeId:l.periodeId||void 0};u.addDevoir(a),Object.assign(l,{titre:"",dateRemise:"",coursId:0,bareme:20,statut:"Publié",periodeId:0})}const x=w(""),b=w(""),f=w(""),v=w(""),g=S(()=>u.devoirsView.filter(a=>(!x.value||a.cours===x.value)&&(!b.value||a.classe===b.value)&&(!f.value||a.periode===f.value)&&(!v.value||a.statut===v.value)));function y(a){return a==="Publié"?"bg-green-100 text-green-700 dark:bg-green-900/40 dark:text-green-200":"bg-slate-100 text-slate-700 dark:bg-slate-900/40 dark:text-slate-200"}return(a,s)=>(r(),o("section",R,[t("header",T,[s[14]||(s[14]=t("div",null,[t("h1",{class:"text-xl font-semibold"},"Devoirs"),t("p",{class:"text-sm text-slate-500 dark:text-slate-400"},"Travaux à rendre")],-1)),t("form",{onSubmit:U(_,["prevent"]),class:"flex flex-wrap gap-2"},[i(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>l.titre=e),placeholder:"Titre",class:"w-full sm:w-auto sm:flex-1 min-w-[180px] px-3 py-2 rounded border dark:bg-slate-900 focus:outline-none focus:ring-2 focus:ring-indigo-500/50",required:""},null,512),[[k,l.titre]]),i(t("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>l.dateRemise=e),type:"date",class:"w-full sm:w-auto min-w-[160px] px-3 py-2 rounded border dark:bg-slate-900 focus:outline-none focus:ring-2 focus:ring-indigo-500/50",required:""},null,512),[[k,l.dateRemise]]),i(t("select",{"onUpdate:modelValue":s[2]||(s[2]=e=>l.coursId=e),class:"w-full sm:w-auto min-w-[220px] px-3 py-2 rounded border dark:bg-slate-900 focus:outline-none focus:ring-2 focus:ring-indigo-500/50",required:""},[s[10]||(s[10]=t("option",{value:0,disabled:""},"— Cours —",-1)),(r(!0),o(d,null,p(m(u).cours,e=>(r(),o("option",{key:e.id,value:e.id},n(e.matiere)+" — "+n(I(e.classeId)),9,q))),128))],512),[[c,l.coursId,void 0,{number:!0}]]),i(t("select",{"onUpdate:modelValue":s[3]||(s[3]=e=>l.periodeId=e),class:"w-full sm:w-auto min-w-[160px] px-3 py-2 rounded border dark:bg-slate-900 focus:outline-none focus:ring-2 focus:ring-indigo-500/50"},[s[11]||(s[11]=t("option",{value:0},"Période (auto)",-1)),(r(!0),o(d,null,p(m(u).periodes,e=>(r(),o("option",{key:e.id,value:e.id},n(e.label),9,j))),128))],512),[[c,l.periodeId,void 0,{number:!0}]]),i(t("input",{"onUpdate:modelValue":s[4]||(s[4]=e=>l.bareme=e),type:"number",min:"1",placeholder:"Barème",class:"w-full sm:w-24 px-3 py-2 rounded border dark:bg-slate-900 focus:outline-none focus:ring-2 focus:ring-indigo-500/50"},null,512),[[k,l.bareme,void 0,{number:!0}]]),i(t("select",{"onUpdate:modelValue":s[5]||(s[5]=e=>l.statut=e),class:"w-full sm:w-auto min-w-[140px] px-3 py-2 rounded border dark:bg-slate-900 focus:outline-none focus:ring-2 focus:ring-indigo-500/50"},[...s[12]||(s[12]=[t("option",null,"Publié",-1),t("option",null,"Archivé",-1)])],512),[[c,l.statut]]),s[13]||(s[13]=t("button",{class:"w-full sm:w-auto px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 transition"}," Ajouter ",-1))],32)]),t("div",A,[i(t("select",{"onUpdate:modelValue":s[6]||(s[6]=e=>x.value=e),class:"w-full sm:w-auto min-w-[180px] px-3 py-2 rounded border dark:bg-slate-900"},[s[15]||(s[15]=t("option",{value:""},"Tous cours",-1)),(r(!0),o(d,null,p(m(u).uniqueDevoirCours,e=>(r(),o("option",{key:e},n(e),1))),128))],512),[[c,x.value]]),i(t("select",{"onUpdate:modelValue":s[7]||(s[7]=e=>b.value=e),class:"w-full sm:w-auto min-w-[160px] px-3 py-2 rounded border dark:bg-slate-900"},[s[16]||(s[16]=t("option",{value:""},"Toutes classes",-1)),(r(!0),o(d,null,p(m(u).uniqueDevoirClasses,e=>(r(),o("option",{key:e},n(e),1))),128))],512),[[c,b.value]]),i(t("select",{"onUpdate:modelValue":s[8]||(s[8]=e=>f.value=e),class:"w-full sm:w-auto min-w-[160px] px-3 py-2 rounded border dark:bg-slate-900"},[s[17]||(s[17]=t("option",{value:""},"Toutes périodes",-1)),(r(!0),o(d,null,p(m(u).uniqueDevoirPeriodes,e=>(r(),o("option",{key:e},n(e),1))),128))],512),[[c,f.value]]),i(t("select",{"onUpdate:modelValue":s[9]||(s[9]=e=>v.value=e),class:"w-full sm:w-auto min-w-[140px] px-3 py-2 rounded border dark:bg-slate-900"},[s[18]||(s[18]=t("option",{value:""},"Tous statuts",-1)),(r(!0),o(d,null,p(m(u).uniqueDevoirStatuts,e=>(r(),o("option",{key:e},n(e),1))),128))],512),[[c,v.value]])]),t("ul",B,[(r(!0),o(d,null,p(g.value,e=>(r(),o("li",{key:e.id,class:"rounded-xl border dark:border-slate-800 bg-white dark:bg-slate-900 p-4"},[t("div",L,[t("div",M,[t("h3",N,n(e.titre),1),t("p",z,n(e.cours)+" — "+n(e.classe),1),t("div",F,[t("span",null,"Remise : "+n(e.dateRemise),1),s[19]||(s[19]=t("span",{class:"mx-1"},"•",-1)),t("span",null,"Période : "+n(e.periode),1)])]),t("div",$,[t("span",{class:C(["px-2 py-0.5 text-xs rounded-full",y(e.statut)])},n(e.statut),3),t("button",{class:"text-xs text-red-600 hover:underline",onClick:V=>m(u).removeDevoir(e.id)},"Supprimer",8,E)])])]))),128)),g.value.length?h("",!0):(r(),o("li",J," Aucun devoir "))]),t("div",O,[t("table",G,[s[21]||(s[21]=t("thead",{class:"bg-slate-50 dark:bg-slate-900/50"},[t("tr",{class:"text-left"},[t("th",{class:"p-3"},"Titre"),t("th",{class:"p-3"},"Cours"),t("th",{class:"p-3 hidden md:table-cell"},"Classe"),t("th",{class:"p-3 hidden lg:table-cell"},"Période"),t("th",{class:"p-3"},"Remise"),t("th",{class:"p-3"},"Statut"),t("th",{class:"p-3 w-1"})])],-1)),t("tbody",null,[(r(!0),o(d,null,p(g.value,e=>(r(),o("tr",{key:e.id,class:"border-t dark:border-slate-800"},[t("td",H,n(e.titre),1),t("td",K,n(e.cours),1),t("td",Q,n(e.classe),1),t("td",W,n(e.periode),1),t("td",X,n(e.dateRemise),1),t("td",Y,[t("span",{class:C(["px-2 py-0.5 text-xs rounded-full",y(e.statut)])},n(e.statut),3)]),t("td",Z,[t("button",{class:"text-red-600 hover:underline",onClick:V=>m(u).removeDevoir(e.id)},"Supprimer",8,ee)])]))),128)),g.value.length?h("",!0):(r(),o("tr",te,[...s[20]||(s[20]=[t("td",{colspan:"7",class:"p-4 text-center text-slate-500"},"Aucun devoir",-1)])]))])])])]))}};export{re as default};
