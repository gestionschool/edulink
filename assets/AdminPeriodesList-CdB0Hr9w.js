import{r as s,l as T,g as U,o as O,h as y,a,i as m,w as n,v as u,d as g,k as L}from"./index-BjUAzvaQ.js";import{_ as N}from"./PageHeader-DhanqyjH.js";import{_ as R,a as B}from"./CrudModal-Bs5nhJF3.js";import{_ as M}from"./DataTable-C4q2Au5h.js";import{A as S}from"./AppLayout-BFNFHsQg.js";const z={class:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors"},E={class:"mx-auto max-w-6xl p-4 sm:p-6"},P={class:"rounded-xl border border-gray-200 bg-white p-3 shadow-sm dark:border-gray-700 dark:bg-gray-900"},K={class:"grid gap-3 sm:grid-cols-2"},Q={class:"text-gray-700 dark:text-gray-200"},j={class:"text-gray-700 dark:text-gray-200"},G={class:"text-gray-700 dark:text-gray-200"},H={class:"text-gray-700 dark:text-gray-200"},I={class:"text-gray-700 dark:text-gray-200"},re={__name:"AdminPeriodesList",setup(J){const v=[{key:"libelle",label:"Libellé"},{key:"annee",label:"Année"},{key:"dateDebut",label:"Début"},{key:"dateFin",label:"Fin"},{key:"etat",label:"État"}],d=s({q:"",annee:""}),b=s([]),c=s([]),i=s(!1),t=s({id:null,libelle:"",annee:"",dateDebut:"",dateFin:"",etat:"Ouvert"});function p(){b.value=$(),l()}function x(){t.value={id:null,libelle:"",annee:"",dateDebut:"",dateFin:"",etat:"Ouvert"},i.value=!0}function w(o){t.value={...o},i.value=!0}async function h(){t.value.id?await F():await D(),i.value=!1,p()}async function D(){}async function F(){}async function V(o){b.value=b.value.filter(e=>e.id!==o.id),l()}function _(){d.value={q:"",annee:""},l()}function f(o){return String(o||"").toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"")}function l(){const o=f(d.value.q),e=f(d.value.annee);c.value=b.value.filter(r=>{const C=f(`${r.libelle} ${r.annee} ${r.dateDebut} ${r.dateFin} ${r.etat}`),q=o?C.includes(o):!0,A=e?f(r.annee).includes(e):!0;return q&&A})}let k;T(d,()=>{clearTimeout(k),k=setTimeout(l,150)},{deep:!0});function $(){return[{id:1,libelle:"Trimestre 1",annee:"2025-2026",dateDebut:"2025-09-01",dateFin:"2025-11-30",etat:"Ouvert"},{id:2,libelle:"Trimestre 2",annee:"2025-2026",dateDebut:"2025-12-01",dateFin:"2026-03-01",etat:"Ouvert"},{id:3,libelle:"Trimestre 3",annee:"2025-2026",dateDebut:"2026-03-02",dateFin:"2026-06-15",etat:"Clos"}]}return p(),(o,e)=>(O(),U(S,null,{default:y(()=>[a("div",z,[a("div",E,[m(N,{title:"Périodes"},{actions:y(()=>[a("button",{class:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-indigo-500 dark:hover:bg-indigo-600 dark:focus:ring-indigo-400",onClick:e[0]||(e[0]=r=>x())}," Nouvelle ")]),_:1}),m(R,{modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=r=>d.value=r),onReset:_},{default:y(()=>[n(a("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>d.value.annee=r),placeholder:"Année scolaire (ex: 2025-2026)",class:"rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm placeholder-gray-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 dark:placeholder-gray-400 dark:focus:border-indigo-400 dark:focus:ring-indigo-400"},null,512),[[u,d.value.annee]]),a("button",{class:"rounded-md border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:border-gray-600 dark:text-gray-200 dark:hover:bg-gray-700 dark:focus:ring-indigo-400",onClick:l}," Filtrer ")]),_:1},8,["modelValue"]),a("div",P,[m(M,{rows:c.value,headers:v,idKey:"id",onEdit:w,onRemove:V},null,8,["rows"])]),m(B,{open:i.value,title:t.value.id?"Modifier période":"Créer période",onClose:e[8]||(e[8]=r=>i.value=!1),onSubmit:h},{default:y(()=>[a("div",K,[a("label",Q,[e[9]||(e[9]=g(" Libellé ",-1)),n(a("input",{"onUpdate:modelValue":e[3]||(e[3]=r=>t.value.libelle=r),placeholder:"Trimestre 1",class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm placeholder-gray-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 dark:focus:border-indigo-400 dark:focus:ring-indigo-400",required:""},null,512),[[u,t.value.libelle]])]),a("label",j,[e[10]||(e[10]=g(" Année ",-1)),n(a("input",{"onUpdate:modelValue":e[4]||(e[4]=r=>t.value.annee=r),placeholder:"2025-2026",class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm placeholder-gray-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 dark:focus:border-indigo-400 dark:focus:ring-indigo-400",required:""},null,512),[[u,t.value.annee]])]),a("label",G,[e[11]||(e[11]=g(" Début ",-1)),n(a("input",{"onUpdate:modelValue":e[5]||(e[5]=r=>t.value.dateDebut=r),type:"date",class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:focus:border-indigo-400 dark:focus:ring-indigo-400",required:""},null,512),[[u,t.value.dateDebut]])]),a("label",H,[e[12]||(e[12]=g(" Fin ",-1)),n(a("input",{"onUpdate:modelValue":e[6]||(e[6]=r=>t.value.dateFin=r),type:"date",class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:focus:border-indigo-400 dark:focus:ring-indigo-400",required:""},null,512),[[u,t.value.dateFin]])]),a("label",I,[e[14]||(e[14]=g(" État ",-1)),n(a("select",{"onUpdate:modelValue":e[7]||(e[7]=r=>t.value.etat=r),class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:focus:border-indigo-400 dark:focus:ring-indigo-400"},[...e[13]||(e[13]=[a("option",null,"Ouvert",-1),a("option",null,"Clos",-1)])],512),[[L,t.value.etat]])])])]),_:1},8,["open","title"])])])]),_:1}))}};export{re as default};
