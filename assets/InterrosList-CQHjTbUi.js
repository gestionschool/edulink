import{r as f,f as k,g as M,o as y,h as m,a as o,i as b,w as i,v as l,c as p,F as v,j as w,d as g,k as O}from"./index-sHYk9eTQ.js";import{u as P}from"./school-D6Cy93US.js";import{_ as z}from"./PageHeader-D6nut-bz.js";import{_ as A,a as j}from"./CrudModal-CzlkyKPl.js";import{_ as K}from"./DataTable-DtU7qz5G.js";import{A as Q}from"./AppLayout-BRMBkRdv.js";const G={class:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors"},H={class:"mx-auto max-w-6xl p-4 sm:p-6"},J={id:"cours-list"},W=["value"],X={id:"classe-list"},Y=["value"],Z={class:"rounded-xl border border-gray-200 bg-white p-3 shadow-sm dark:border-gray-700 dark:bg-gray-900"},rr={class:"grid gap-3 sm:grid-cols-2"},er={class:"text-gray-700 dark:text-gray-200"},or={class:"text-gray-700 dark:text-gray-200"},ar={class:"text-gray-700 dark:text-gray-200"},tr={class:"text-gray-700 dark:text-gray-200"},sr={class:"text-gray-700 dark:text-gray-200"},dr={class:"text-gray-700 dark:text-gray-200"},mr={__name:"InterrosList",setup(ir){const n=P(),h=[{key:"titre",label:"Titre"},{key:"type",label:"Type"},{key:"date",label:"Date"},{key:"cours",label:"Cours"},{key:"classe",label:"Classe"},{key:"bareme",label:"Barème"}],t=f({q:"",cours:"",classe:"",date:""}),C=k(()=>n.uniqueInterroCours),V=k(()=>n.uniqueInterroClasses);function u(s){return String(s||"").toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"")}const _=k(()=>{const s=u(t.value.q),r=u(t.value.cours),e=u(t.value.classe),x=t.value.date;return n.interros.filter(d=>{const T=u(`${d.titre} ${d.type} ${d.date} ${d.cours} ${d.classe} ${d.bareme}`),N=s?T.includes(s):!0,L=r?u(d.cours).includes(r):!0,R=e?u(d.classe).includes(e):!0,E=x?d.date===x:!0;return N&&L&&R&&E})}),c=f(!1),a=f({id:null,titre:"",type:"Programmée",date:"",cours:"",classe:"",bareme:10});function $(){t.value={q:"",cours:"",classe:"",date:""}}function q(){a.value={id:null,titre:"",type:"Programmée",date:"",cours:"",classe:"",bareme:10},c.value=!0}function U(s){a.value={...s},c.value=!0}function D(){a.value.id?B():I(),c.value=!1}function I(){n.addInterro({...a.value})}function B(){n.updateInterro({...a.value})}function F(s){n.removeInterro(s.id)}function S(){}return(s,r)=>(y(),M(Q,null,{default:m(()=>[o("div",G,[o("div",H,[b(z,{title:"Interrogations"},{actions:m(()=>[o("button",{class:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-indigo-500 dark:hover:bg-indigo-600 dark:focus:ring-indigo-400",onClick:r[0]||(r[0]=e=>q())}," Nouvelle ")]),_:1}),b(A,{modelValue:t.value,"onUpdate:modelValue":r[4]||(r[4]=e=>t.value=e),onReset:$},{default:m(()=>[i(o("input",{"onUpdate:modelValue":r[1]||(r[1]=e=>t.value.cours=e),class:"rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm placeholder-gray-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 dark:placeholder-gray-400 dark:focus:border-indigo-400 dark:focus:ring-indigo-400",placeholder:"Cours…",list:"cours-list"},null,512),[[l,t.value.cours]]),o("datalist",J,[(y(!0),p(v,null,w(C.value,e=>(y(),p("option",{key:e,value:e},null,8,W))),128))]),i(o("input",{"onUpdate:modelValue":r[2]||(r[2]=e=>t.value.classe=e),class:"rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm placeholder-gray-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 dark:placeholder-gray-400 dark:focus:border-indigo-400 dark:focus:ring-indigo-400",placeholder:"Classe…",list:"classe-list"},null,512),[[l,t.value.classe]]),o("datalist",X,[(y(!0),p(v,null,w(V.value,e=>(y(),p("option",{key:e,value:e},null,8,Y))),128))]),i(o("input",{"onUpdate:modelValue":r[3]||(r[3]=e=>t.value.date=e),type:"date",class:"rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 dark:focus:border-indigo-400 dark:focus:ring-indigo-400"},null,512),[[l,t.value.date]]),o("button",{class:"rounded-md border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:border-gray-600 dark:text-gray-200 dark:hover:bg-gray-700 dark:focus:ring-indigo-400",onClick:S}," Filtrer ")]),_:1},8,["modelValue"]),o("div",Z,[b(K,{rows:_.value,headers:h,idKey:"id",onEdit:U,onRemove:F},null,8,["rows"])]),b(j,{open:c.value,title:a.value.id?"Modifier interrogation":"Créer interrogation",onClose:r[11]||(r[11]=e=>c.value=!1),onSubmit:D},{default:m(()=>[o("div",rr,[o("label",er,[r[12]||(r[12]=g(" Titre ",-1)),i(o("input",{"onUpdate:modelValue":r[5]||(r[5]=e=>a.value.titre=e),class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm placeholder-gray-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 dark:focus:border-indigo-400 dark:focus:ring-indigo-400",required:""},null,512),[[l,a.value.titre]])]),o("label",or,[r[14]||(r[14]=g(" Type ",-1)),i(o("select",{"onUpdate:modelValue":r[6]||(r[6]=e=>a.value.type=e),class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:focus:border-indigo-400 dark:focus:ring-indigo-400"},[...r[13]||(r[13]=[o("option",null,"Surprise",-1),o("option",null,"Programmée",-1)])],512),[[O,a.value.type]])]),o("label",ar,[r[15]||(r[15]=g(" Date ",-1)),i(o("input",{"onUpdate:modelValue":r[7]||(r[7]=e=>a.value.date=e),type:"date",class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:focus:border-indigo-400 dark:focus:ring-indigo-400",required:""},null,512),[[l,a.value.date]])]),o("label",tr,[r[16]||(r[16]=g(" Cours ",-1)),i(o("input",{"onUpdate:modelValue":r[8]||(r[8]=e=>a.value.cours=e),list:"cours-list",class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm placeholder-gray-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 dark:focus:border-indigo-400 dark:focus:ring-indigo-400",required:""},null,512),[[l,a.value.cours]])]),o("label",sr,[r[17]||(r[17]=g(" Classe ",-1)),i(o("input",{"onUpdate:modelValue":r[9]||(r[9]=e=>a.value.classe=e),list:"classe-list",class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm placeholder-gray-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 dark:focus:border-indigo-400 dark:focus:ring-indigo-400",required:""},null,512),[[l,a.value.classe]])]),o("label",dr,[r[18]||(r[18]=g(" Barème ",-1)),i(o("input",{"onUpdate:modelValue":r[10]||(r[10]=e=>a.value.bareme=e),type:"number",min:"1",class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm placeholder-gray-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 dark:focus:border-indigo-400 dark:focus:ring-indigo-400"},null,512),[[l,a.value.bareme,void 0,{number:!0}]])])])]),_:1},8,["open","title"])])])]),_:1}))}};export{mr as default};
