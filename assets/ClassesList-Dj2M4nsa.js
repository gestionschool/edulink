import{f,r as m,l as D,g as T,o as g,h as y,a as o,i as b,w as l,c,F as v,j as k,t as x,k as w,d as s,v as n}from"./index-BjUAzvaQ.js";import{u as M}from"./school-CHXg0hx7.js";import{_ as O}from"./PageHeader-DhanqyjH.js";import{_ as z,a as A}from"./CrudModal-Bs5nhJF3.js";import{_ as j}from"./DataTable-C4q2Au5h.js";import{A as K}from"./AppLayout-BFNFHsQg.js";const Q={class:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors"},G={class:"mx-auto max-w-6xl p-4 sm:p-6"},H=["value"],I=["value"],J={class:"rounded-xl border border-gray-200 bg-white p-3 shadow-sm dark:border-gray-700 dark:bg-gray-900"},P={class:"grid gap-3 sm:grid-cols-2"},W={class:"text-gray-700 dark:text-gray-200"},X={class:"text-gray-700 dark:text-gray-200"},Y={class:"text-gray-700 dark:text-gray-200"},Z={class:"text-gray-700 dark:text-gray-200"},ee={class:"text-gray-700 dark:text-gray-200"},re={class:"text-gray-700 dark:text-gray-200"},ne={__name:"ClassesList",setup(oe){const t=M(),h=[{key:"code",label:"Code"},{key:"libelle",label:"Libellé"},{key:"niveau",label:"Niveau"},{key:"filiere",label:"Filière"},{key:"effectif",label:"Effectif"},{key:"titulaire",label:"Titulaire"}],C=f(()=>t.uniqueClasseNiveaux),V=f(()=>t.uniqueClasseFilieres),d=m({q:"",niveau:"",filiere:""}),F=f(()=>t.classesView);function p(i){return String(i||"").toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"")}function $(i){const e=p(d.value.q),r=!e||p(`${i.code} ${i.libelle} ${i.niveau} ${i.filiere} ${i.titulaire}`).includes(e),R=!d.value.niveau||String(i.niveau)===String(d.value.niveau),B=!d.value.filiere||i.filiere===d.value.filiere;return r&&R&&B}const N=f(()=>F.value.filter($));function S(){d.value={q:"",niveau:"",filiere:""}}function U(){}const u=m(!1),a=m({id:null,code:"",libelle:"",niveau:"",filiere:"",effectif:0,titulaire:""});function _(){a.value={id:null,code:"",libelle:"",niveau:"",filiere:"",effectif:0,titulaire:""},u.value=!0}function q(i){a.value={...i},u.value=!0}async function L(){a.value.id?t.updateClasse({...a.value}):t.addClasse({...a.value}),u.value=!1}function E(i){t.removeClasse(i.id)}return D(()=>t.classesView.length,()=>{}),(i,e)=>(g(),T(K,null,{default:y(()=>[o("div",Q,[o("div",G,[b(O,{title:"Classes"},{actions:y(()=>[o("button",{class:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-indigo-500 dark:hover:bg-indigo-600 dark:focus:ring-indigo-400",onClick:e[0]||(e[0]=r=>_())}," Nouvelle ")]),_:1}),b(z,{modelValue:d.value,"onUpdate:modelValue":e[3]||(e[3]=r=>d.value=r),onReset:S},{default:y(()=>[l(o("select",{"onUpdate:modelValue":e[1]||(e[1]=r=>d.value.niveau=r),class:"rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 dark:focus:border-indigo-400 dark:focus:ring-indigo-400"},[e[11]||(e[11]=o("option",{value:""},"Niveau",-1)),(g(!0),c(v,null,k(C.value,r=>(g(),c("option",{key:r,value:String(r)},x(r),9,H))),128))],512),[[w,d.value.niveau]]),l(o("select",{"onUpdate:modelValue":e[2]||(e[2]=r=>d.value.filiere=r),class:"rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 dark:focus:border-indigo-400 dark:focus:ring-indigo-400"},[e[12]||(e[12]=o("option",{value:""},"Filière/Option",-1)),(g(!0),c(v,null,k(V.value,r=>(g(),c("option",{key:r,value:r},x(r),9,I))),128))],512),[[w,d.value.filiere]]),o("button",{class:"rounded-md border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:border-gray-600 dark:text-gray-200 dark:hover:bg-gray-700 dark:focus:ring-indigo-400",onClick:U}," Filtrer ")]),_:1},8,["modelValue"]),o("div",J,[b(j,{rows:N.value,headers:h,idKey:"id",onEdit:q,onRemove:E},null,8,["rows"])]),b(A,{open:u.value,title:a.value.id?"Modifier classe":"Créer classe",onClose:e[10]||(e[10]=r=>u.value=!1),onSubmit:L},{default:y(()=>[o("div",P,[o("label",W,[e[13]||(e[13]=s(" Code ",-1)),l(o("input",{"onUpdate:modelValue":e[4]||(e[4]=r=>a.value.code=r),required:"",class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm placeholder-gray-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 dark:focus:border-indigo-400 dark:focus:ring-indigo-400"},null,512),[[n,a.value.code]])]),o("label",X,[e[14]||(e[14]=s(" Libellé ",-1)),l(o("input",{"onUpdate:modelValue":e[5]||(e[5]=r=>a.value.libelle=r),required:"",class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm placeholder-gray-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 dark:focus:border-indigo-400 dark:focus:ring-indigo-400"},null,512),[[n,a.value.libelle]])]),o("label",Y,[e[15]||(e[15]=s(" Niveau ",-1)),l(o("input",{"onUpdate:modelValue":e[6]||(e[6]=r=>a.value.niveau=r),class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm placeholder-gray-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 dark:focus:border-indigo-400 dark:focus:ring-indigo-400"},null,512),[[n,a.value.niveau]])]),o("label",Z,[e[16]||(e[16]=s(" Filière/Option ",-1)),l(o("input",{"onUpdate:modelValue":e[7]||(e[7]=r=>a.value.filiere=r),class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm placeholder-gray-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 dark:focus:border-indigo-400 dark:focus:ring-indigo-400"},null,512),[[n,a.value.filiere]])]),o("label",ee,[e[17]||(e[17]=s(" Effectif ",-1)),l(o("input",{"onUpdate:modelValue":e[8]||(e[8]=r=>a.value.effectif=r),type:"number",min:"0",class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm placeholder-gray-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 dark:focus:border-indigo-400 dark:focus:ring-indigo-400"},null,512),[[n,a.value.effectif,void 0,{number:!0}]])]),o("label",re,[e[18]||(e[18]=s(" Titulaire ",-1)),l(o("input",{"onUpdate:modelValue":e[9]||(e[9]=r=>a.value.titulaire=r),class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm placeholder-gray-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 dark:focus:border-indigo-400 dark:focus:ring-indigo-400"},null,512),[[n,a.value.titulaire]])])])]),_:1},8,["open","title"])])])]),_:1}))}};export{ne as default};
