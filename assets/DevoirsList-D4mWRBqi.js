import{r as w,f as m,g as Q,o as s,h as k,a as o,i as v,w as i,v as g,c as l,F as p,j as f,t as h,k as x,d as y}from"./index-sHYk9eTQ.js";import{u as G}from"./school-D6Cy93US.js";import{_ as H}from"./PageHeader-D6nut-bz.js";import{_ as I,a as J}from"./CrudModal-CzlkyKPl.js";import{_ as W}from"./DataTable-DtU7qz5G.js";import{A as X}from"./AppLayout-BRMBkRdv.js";const Y={class:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors"},Z={class:"mx-auto max-w-6xl p-4 sm:p-6"},ee={id:"cours-list"},re=["value"],oe={id:"classe-list"},te=["value"],ae=["value"],de=["value"],se={class:"rounded-xl border border-gray-200 bg-white p-3 shadow-sm dark:border-gray-700 dark:bg-gray-900"},ie={class:"grid gap-3 sm:grid-cols-2"},le={class:"text-gray-700 dark:text-gray-200"},ue={class:"text-gray-700 dark:text-gray-200"},ne={class:"text-gray-700 dark:text-gray-200"},ge={class:"text-gray-700 dark:text-gray-200"},ye={class:"text-gray-700 dark:text-gray-200"},be={class:"text-gray-700 dark:text-gray-200"},ce={class:"text-gray-700 dark:text-gray-200"},me=["value"],Ce={__name:"DevoirsList",setup(pe){const n=G(),$=[{key:"titre",label:"Titre"},{key:"cours",label:"Cours"},{key:"classe",label:"Classe"},{key:"dateRemise",label:"Remise"},{key:"bareme",label:"Barème"},{key:"statut",label:"Statut"}],a=w({q:"",cours:"",classe:"",periode:"",statut:""}),q=m(()=>n.uniqueDevoirCours),S=m(()=>n.uniqueDevoirClasses),C=m(()=>n.uniqueDevoirPeriodes),U=m(()=>n.uniqueDevoirStatuts);function b(u){return String(u||"").toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"")}const R=m(()=>{const u=b(a.value.q),e=b(a.value.cours),r=b(a.value.classe),V=a.value.periode,D=a.value.statut;return n.devoirs.filter(d=>{const A=b(`${d.titre} ${d.cours} ${d.classe} ${d.dateRemise} ${d.bareme} ${d.statut} ${d.periode||""}`),E=u?A.includes(u):!0,M=e?b(d.cours).includes(e):!0,z=r?b(d.classe).includes(r):!0,j=V?d.periode===V:!0,K=D?d.statut===D:!0;return E&&M&&z&&j&&K})}),c=w(!1),t=w({id:null,titre:"",cours:"",classe:"",dateRemise:"",bareme:20,statut:"Publié",periode:""});function _(){a.value={q:"",cours:"",classe:"",periode:"",statut:""}}function P(){t.value={id:null,titre:"",cours:"",classe:"",dateRemise:"",bareme:20,statut:"Publié",periode:""},c.value=!0}function B(u){t.value={...u},c.value=!0}function F(){t.value.id?O():N(),c.value=!1}function N(){n.addDevoir({...t.value})}function O(){n.updateDevoir({...t.value})}function L(u){n.removeDevoir(u.id)}function T(){}return(u,e)=>(s(),Q(X,null,{default:k(()=>[o("div",Y,[o("div",Z,[v(H,{title:"Devoirs"},{actions:k(()=>[o("button",{class:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-indigo-500 dark:hover:bg-indigo-600 dark:focus:ring-indigo-400",onClick:e[0]||(e[0]=r=>P())}," Nouveau ")]),_:1}),v(I,{modelValue:a.value,"onUpdate:modelValue":e[5]||(e[5]=r=>a.value=r),onReset:_},{default:k(()=>[i(o("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>a.value.cours=r),placeholder:"Cours…",list:"cours-list",class:"rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm placeholder-gray-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 dark:placeholder-gray-400 dark:focus:border-indigo-400 dark:focus:ring-indigo-400"},null,512),[[g,a.value.cours]]),o("datalist",ee,[(s(!0),l(p,null,f(q.value,r=>(s(),l("option",{key:r,value:r},null,8,re))),128))]),i(o("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>a.value.classe=r),placeholder:"Classe…",list:"classe-list",class:"rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm placeholder-gray-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 dark:placeholder-gray-400 dark:focus:border-indigo-400 dark:focus:ring-indigo-400"},null,512),[[g,a.value.classe]]),o("datalist",oe,[(s(!0),l(p,null,f(S.value,r=>(s(),l("option",{key:r,value:r},null,8,te))),128))]),i(o("select",{"onUpdate:modelValue":e[3]||(e[3]=r=>a.value.periode=r),class:"rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 dark:focus:border-indigo-400 dark:focus:ring-indigo-400"},[e[14]||(e[14]=o("option",{value:""},"Période",-1)),(s(!0),l(p,null,f(C.value,r=>(s(),l("option",{key:r,value:r},h(r),9,ae))),128))],512),[[x,a.value.periode]]),i(o("select",{"onUpdate:modelValue":e[4]||(e[4]=r=>a.value.statut=r),class:"rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 dark:focus:border-indigo-400 dark:focus:ring-indigo-400"},[e[15]||(e[15]=o("option",{value:""},"Statut",-1)),(s(!0),l(p,null,f(U.value,r=>(s(),l("option",{key:r,value:r},h(r),9,de))),128))],512),[[x,a.value.statut]]),o("button",{class:"rounded-md border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:border-gray-600 dark:text-gray-200 dark:hover:bg-gray-700 dark:focus:ring-indigo-400",onClick:T}," Filtrer ")]),_:1},8,["modelValue"]),o("div",se,[v(W,{rows:R.value,headers:$,idKey:"id",onEdit:B,onRemove:L},null,8,["rows"])]),v(J,{open:c.value,title:t.value.id?"Modifier devoir":"Créer devoir",onClose:e[13]||(e[13]=r=>c.value=!1),onSubmit:F},{default:k(()=>[o("div",ie,[o("label",le,[e[16]||(e[16]=y(" Titre ",-1)),i(o("input",{"onUpdate:modelValue":e[6]||(e[6]=r=>t.value.titre=r),class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm placeholder-gray-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 dark:focus:border-indigo-400 dark:focus:ring-indigo-400",required:""},null,512),[[g,t.value.titre]])]),o("label",ue,[e[17]||(e[17]=y(" Cours ",-1)),i(o("input",{"onUpdate:modelValue":e[7]||(e[7]=r=>t.value.cours=r),list:"cours-list",class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm placeholder-gray-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 dark:focus:border-indigo-400 dark:focus:ring-indigo-400",required:""},null,512),[[g,t.value.cours]])]),o("label",ne,[e[18]||(e[18]=y(" Classe ",-1)),i(o("input",{"onUpdate:modelValue":e[8]||(e[8]=r=>t.value.classe=r),list:"classe-list",class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm placeholder-gray-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 dark:focus:border-indigo-400 dark:focus:ring-indigo-400",required:""},null,512),[[g,t.value.classe]])]),o("label",ge,[e[19]||(e[19]=y(" Date de remise ",-1)),i(o("input",{"onUpdate:modelValue":e[9]||(e[9]=r=>t.value.dateRemise=r),type:"date",class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:focus:border-indigo-400 dark:focus:ring-indigo-400",required:""},null,512),[[g,t.value.dateRemise]])]),o("label",ye,[e[20]||(e[20]=y(" Barème ",-1)),i(o("input",{"onUpdate:modelValue":e[10]||(e[10]=r=>t.value.bareme=r),type:"number",min:"1",class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm placeholder-gray-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 dark:focus:border-indigo-400 dark:focus:ring-indigo-400"},null,512),[[g,t.value.bareme,void 0,{number:!0}]])]),o("label",be,[e[22]||(e[22]=y(" Statut ",-1)),i(o("select",{"onUpdate:modelValue":e[11]||(e[11]=r=>t.value.statut=r),class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:focus:border-indigo-400 dark:focus:ring-indigo-400"},[...e[21]||(e[21]=[o("option",null,"Publié",-1),o("option",null,"Archivé",-1)])],512),[[x,t.value.statut]])]),o("label",ce,[e[24]||(e[24]=y(" Période ",-1)),i(o("select",{"onUpdate:modelValue":e[12]||(e[12]=r=>t.value.periode=r),class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:focus:border-indigo-400 dark:focus:ring-indigo-400"},[e[23]||(e[23]=o("option",{value:""},"—",-1)),(s(!0),l(p,null,f(C.value,r=>(s(),l("option",{key:r,value:r},h(r),9,me))),128))],512),[[x,t.value.periode]])])])]),_:1},8,["open","title"])])])]),_:1}))}};export{Ce as default};
