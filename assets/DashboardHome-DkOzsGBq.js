import{u as f}from"./school-y-Km73Fy.js";import{c as n,a as d,b as e,t as l,k,x,F as h,h as p,o as r}from"./index-vgNnEmJo.js";const y={class:"space-y-6"},w={class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4"},C={class:"rounded-xl border p-4 bg-white dark:bg-slate-900 dark:border-slate-800"},N={class:"mt-1 text-2xl font-semibold"},V={class:"rounded-xl border p-4 bg-white dark:bg-slate-900 dark:border-slate-800"},D={class:"mt-1 text-2xl font-semibold"},S={class:"rounded-xl border p-4 bg-white dark:bg-slate-900 dark:border-slate-800"},R={class:"mt-1 text-2xl font-semibold"},j={class:"rounded-xl border p-4 bg-white dark:bg-slate-900 dark:border-slate-800"},A={class:"mt-1 text-2xl font-semibold"},B={class:"rounded-xl border p-4 bg-white dark:bg-slate-900 dark:border-slate-800"},E={class:"flex items-center justify-between"},F={class:"mt-1 text-2xl font-semibold"},I={key:0,class:"text-sm font-normal text-slate-500 ml-2"},T={class:"grid gap-4 md:grid-cols-2"},G={class:"rounded-xl border p-4 bg-white dark:bg-slate-900 dark:border-slate-800"},H={class:"space-y-2"},L={class:"truncate"},M={class:"text-slate-500"},O={key:0,class:"text-sm text-slate-500"},P={class:"rounded-xl border p-4 bg-white dark:bg-slate-900 dark:border-slate-800"},q={class:"space-y-2"},z={class:"truncate"},J={class:"text-slate-500"},K={key:0,class:"text-sm text-slate-500"},X={__name:"DashboardHome",setup(Q){const o=f(),c=n(()=>({students:o.students.length,classes:o.classes.length,teachers:o.teachers.length,cours:o.cours.length})),u=n(()=>o.periodes.find(t=>t.active)),g=n(()=>{if(!u.value)return null;const t=o.evaluations.filter(i=>i.periodeId===u.value.id);if(!t.length)return null;const s=t.reduce((i,m)=>i+Number(m.coef||0),0);return s?(t.reduce((i,m)=>i+Number(m.note||0)*Number(m.coef||0),0)/s).toFixed(2):null}),b=new Date().toISOString().slice(0,10),v=n(()=>[...o.devoirsView].filter(t=>t.dateRemise>=b).sort((t,s)=>t.dateRemise.localeCompare(s.dateRemise)).slice(0,5)),_=n(()=>[...o.examensView].filter(t=>t.date>=b).sort((t,s)=>t.date.localeCompare(s.date)).slice(0,5));return(t,s)=>(r(),d("section",y,[s[7]||(s[7]=e("header",null,[e("h1",{class:"text-2xl font-semibold"},"Tableau de bord"),e("p",{class:"text-sm text-slate-500 dark:text-slate-400"},"Vue d’ensemble de l’établissement")],-1)),e("div",w,[e("div",C,[s[0]||(s[0]=e("div",{class:"text-sm text-slate-500"},"Élèves",-1)),e("div",N,l(c.value.students),1)]),e("div",V,[s[1]||(s[1]=e("div",{class:"text-sm text-slate-500"},"Classes",-1)),e("div",D,l(c.value.classes),1)]),e("div",S,[s[2]||(s[2]=e("div",{class:"text-sm text-slate-500"},"Professeurs",-1)),e("div",R,l(c.value.teachers),1)]),e("div",j,[s[3]||(s[3]=e("div",{class:"text-sm text-slate-500"},"Cours",-1)),e("div",A,l(c.value.cours),1)])]),e("div",B,[e("div",E,[e("div",null,[s[4]||(s[4]=e("div",{class:"text-sm text-slate-500"},"Moyenne globale",-1)),e("div",F,[k(l(g.value??"—")+" ",1),u.value?(r(),d("span",I," ("+l(u.value.label)+") ",1)):x("",!0)])])])]),e("div",T,[e("div",G,[s[5]||(s[5]=e("h3",{class:"font-semibold mb-2"},"Devoirs à venir",-1)),e("ul",H,[(r(!0),d(h,null,p(v.value,a=>(r(),d("li",{key:a.id,class:"flex items-center justify-between text-sm"},[e("span",L,l(a.titre),1),e("span",M,l(a.dateRemise),1)]))),128)),v.value.length?x("",!0):(r(),d("li",O,"Aucun devoir à venir."))])]),e("div",P,[s[6]||(s[6]=e("h3",{class:"font-semibold mb-2"},"Examens programmés",-1)),e("ul",q,[(r(!0),d(h,null,p(_.value,a=>(r(),d("li",{key:a.id,class:"flex items-center justify-between text-sm"},[e("span",z,l(a.titre),1),e("span",J,l(a.date),1)]))),128)),_.value.length?x("",!0):(r(),d("li",K,"Aucun examen à venir."))])])])]))}};export{X as default};
