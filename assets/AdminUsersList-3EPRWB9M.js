import{r as u,i as B,f as F,g as f,o as w,a as r,h as c,w as s,j as y,c as T,b as I,d as g,v as p}from"./index-CgkLHWAA.js";import{A as L,_}from"./AppLayout-Cj5fvSVX.js";import{_ as z,a as j}from"./CrudModal-Cg6CkTtY.js";import{_ as K}from"./DataTable-Ce5GLHUA.js";const O={class:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors"},P={class:"mx-auto max-w-6xl p-4 sm:p-6"},Q={class:"rounded-xl border border-gray-200 bg-white p-3 shadow-sm dark:border-gray-700 dark:bg-gray-900"},G={class:"grid gap-3 sm:grid-cols-2"},H={class:"text-gray-700 dark:text-gray-200"},J={class:"text-gray-700 dark:text-gray-200"},W={class:"text-gray-700 dark:text-gray-200"},X={class:"text-gray-700 dark:text-gray-200"},Y={key:0,class:"text-gray-700 dark:text-gray-200"},ae={__name:"AdminUsersList",setup(Z){const A=[{key:"nom",label:"Nom"},{key:"email",label:"Email"},{key:"role",label:"Rôle"},{key:"dernierAcces",label:"Dernier accès"},{key:"statut",label:"Statut"}],a=u({q:"",role:"",statut:""}),m=u([]),b=u([]),n=u(!1),t=u({id:null,nom:"",email:"",role:"gestion",statut:"Actif",password:""});function k(){m.value=S(),l()}function V(){t.value={id:null,nom:"",email:"",role:"gestion",statut:"Actif",password:""},n.value=!0}function $(d){t.value={...d,password:""},n.value=!0}async function h(){t.value.id?await U():await R(),n.value=!1,k()}async function R(){}async function U(){}async function C(d){m.value=m.value.filter(e=>e.id!==d.id),l()}function N(){a.value={q:"",role:"",statut:""},l()}function v(d){return String(d||"").toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"")}function l(){const d=v(a.value.q),e=a.value.role,o=a.value.statut;b.value=m.value.filter(i=>{const q=v(`${i.nom} ${i.email} ${i.role} ${i.statut} ${i.dernierAcces}`),D=d?q.includes(d):!0,E=e?i.role===e:!0,M=o?i.statut===o:!0;return D&&E&&M})}let x;B(a,()=>{clearTimeout(x),x=setTimeout(l,150)},{deep:!0});function S(){return[{id:1,nom:"Admin",email:"admin@sas.com",role:"admin",dernierAcces:"2025-09-10 14:22",statut:"Actif"},{id:2,nom:"Paul",email:"paul@ecole.com",role:"professeur",dernierAcces:"2025-09-14 09:10",statut:"Inactif"},{id:3,nom:"Mira",email:"mira@ecole.com",role:"gestion",dernierAcces:"2025-09-15 11:30",statut:"Actif"}]}return k(),(d,e)=>(w(),F(L,null,{default:f(()=>[r("div",O,[r("div",P,[c(_,{title:"Utilisateurs"},{actions:f(()=>[r("button",{class:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-indigo-500 dark:hover:bg-indigo-600 dark:focus:ring-indigo-400",onClick:e[0]||(e[0]=o=>V())}," Nouveau ")]),_:1}),c(z,{modelValue:a.value,"onUpdate:modelValue":e[3]||(e[3]=o=>a.value=o),onReset:N},{default:f(()=>[s(r("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>a.value.role=o),class:"rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 dark:focus:border-indigo-400 dark:focus:ring-indigo-400"},[...e[10]||(e[10]=[r("option",{value:""},"Rôle",-1),r("option",null,"admin",-1),r("option",null,"professeur",-1),r("option",null,"gestion",-1)])],512),[[y,a.value.role]]),s(r("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>a.value.statut=o),class:"rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 dark:focus:border-indigo-400 dark:focus:ring-indigo-400"},[...e[11]||(e[11]=[r("option",{value:""},"Statut",-1),r("option",null,"Actif",-1),r("option",null,"Inactif",-1)])],512),[[y,a.value.statut]]),r("button",{class:"rounded-md border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:border-gray-600 dark:text-gray-200 dark:hover:bg-gray-700 dark:focus:ring-indigo-400",onClick:l}," Filtrer ")]),_:1},8,["modelValue"]),r("div",Q,[c(K,{rows:b.value,headers:A,idKey:"id",onEdit:$,onRemove:C},null,8,["rows"])]),c(j,{open:n.value,title:t.value.id?"Modifier utilisateur":"Créer utilisateur",onClose:e[9]||(e[9]=o=>n.value=!1),onSubmit:h},{default:f(()=>[r("div",G,[r("label",H,[e[12]||(e[12]=g(" Nom ",-1)),s(r("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>t.value.nom=o),class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm placeholder-gray-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 dark:focus:border-indigo-400 dark:focus:ring-indigo-400",required:""},null,512),[[p,t.value.nom]])]),r("label",J,[e[13]||(e[13]=g(" Email ",-1)),s(r("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>t.value.email=o),type:"email",class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm placeholder-gray-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 dark:focus:border-indigo-400 dark:focus:ring-indigo-400",required:""},null,512),[[p,t.value.email]])]),r("label",W,[e[15]||(e[15]=g(" Rôle ",-1)),s(r("select",{"onUpdate:modelValue":e[6]||(e[6]=o=>t.value.role=o),class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:focus:border-indigo-400 dark:focus:ring-indigo-400"},[...e[14]||(e[14]=[r("option",null,"admin",-1),r("option",null,"professeur",-1),r("option",null,"gestion",-1)])],512),[[y,t.value.role]])]),r("label",X,[e[17]||(e[17]=g(" Statut ",-1)),s(r("select",{"onUpdate:modelValue":e[7]||(e[7]=o=>t.value.statut=o),class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:focus:border-indigo-400 dark:focus:ring-indigo-400"},[...e[16]||(e[16]=[r("option",null,"Actif",-1),r("option",null,"Inactif",-1)])],512),[[y,t.value.statut]])]),t.value.id?I("",!0):(w(),T("label",Y,[e[18]||(e[18]=g(" Mot de passe ",-1)),s(r("input",{"onUpdate:modelValue":e[8]||(e[8]=o=>t.value.password=o),type:"password",class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm placeholder-gray-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 dark:focus:border-indigo-400 dark:focus:ring-indigo-400",required:""},null,512),[[p,t.value.password]])]))])]),_:1},8,["open","title"])])])]),_:1}))}};export{ae as default};
