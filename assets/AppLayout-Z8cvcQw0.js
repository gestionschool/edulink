import{u as q,c as E,R as m,r as K,w as U,a as c,o as u,b as t,d as v,e as h,f as L,g as z,F as N,h as B,t as y,i as F,n as S,j as W,v as Y,k as C,T as j,l as J,m as D,p as Q,q as X,s as O,x as G,y as I,z as H,A as Z,B as ee,C as te,D as se,E as oe,G as re,H as ne}from"./index-DNOX9g9Q.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";const le={class:"h-full flex flex-col"},ae={class:"px-4 h-16 flex items-center border-b border-gray-200 dark:border-gray-800"},ie={class:"flex-1 overflow-y-auto py-4 px-3"},de={class:"sr-only"},ue=["onClick","aria-expanded","aria-controls"],ce={class:"inline-flex items-center gap-3"},pe=["innerHTML"],fe=["id"],ve={class:"inline-flex items-center gap-3"},ge=["innerHTML"],me={__name:"Sidebar",emits:["navigate"],setup(b){const d=J(),a=q(),i=E(()=>a.role??a.user?.role??null),l=e=>typeof e=="string"?e.trim():e&&typeof e=="object"?(e.code??e.value??e.key??String(e)).trim():String(e??"").trim(),g=(e,s)=>{if(!e||!Array.isArray(e)||e.length===0)return!0;if(!s)return!1;const f=l(s);return e.map(l).includes(f)},x=[{title:"Admin général",items:[{key:"saas-admin",label:"Administration globale",icon:"shield",roles:[m.ADMIN_GENERALE],children:[{to:"/admin/ecoles",prefix:"/admin/ecoles",label:"Écoles"},{to:"/admin/utilisateurs",prefix:"/admin/utilisateurs",label:"Utilisateurs"}]}]},{title:"Admin école",items:[{key:"ecole-structure",label:"Structure académique",icon:"layers",roles:[m.ADMIN_GENERALE,m.ADMIN_ECOLE],children:[{to:"/classes",prefix:"/classes",label:"Classes"},{to:"/filieres",prefix:"/filieres",label:"Filières"},{to:"/niveaux",prefix:"/niveaux",label:"Niveaux"},{to:"/emplois",prefix:"/emplois",label:"Emplois du temps"},{to:"/emplois/mes",prefix:"/emplois/mes",label:"Mon Emplois du temps"}]},{key:"ecole-communautes",label:"Communautés",icon:"building",roles:[m.ADMIN_GENERALE,m.ADMIN_ECOLE],children:[{to:"/communautes/etudiants",prefix:"/communautes/etudiants",label:"Élèves"},{to:"/communautes/professeurs",prefix:"/communautes/professeurs",label:"Professeurs"}]}]},{title:"Pédagogie",items:[{key:"pedago",label:"Pédagogie",icon:"book",roles:[m.ADMIN_GENERALE,m.ADMIN_ECOLE,m.PROFESSEUR],children:[{to:"/cours",prefix:"/cours",label:"Cours"},{to:"/devoirs",prefix:"/devoirs",label:"Devoirs"},{to:"/interros",prefix:"/interros",label:"Interrogations"},{to:"/examens",prefix:"/examens",label:"Examens"},{to:"/notes",prefix:"/notes",label:"Saisie des notes"},{to:"/bulletins",prefix:"/bulletins",label:"Bulletins"},{to:"/bulletin/recherche",prefix:"/bulletin/recherche",label:"Recherche bulletins"}]}]},{title:"Présences",items:[{key:"attendance",label:"Présences",icon:"check",roles:[m.ADMIN_GENERALE,m.PROFESSEUR,m.ADMIN_ECOLE],children:[{to:"/presences/marque",prefix:"/presences/marque",label:"Marquer la présence"},{to:"/presences/liste",prefix:"/presences/liste",label:"liste de présence"},{to:"/presences/stats",prefix:"/presences/stats",label:"stat de presence"}]}]},{title:"Rapports",items:[{key:"reports",label:"Rapports & Stats",icon:"chart",roles:[m.ADMIN_GENERALE,m.ADMIN_ECOLE],children:[{to:"/rapports/academiques",prefix:"/rapports/academiques",label:"Académiques"},{to:"/rapports/presences",prefix:"/rapports/presences",label:"Présences"}]}]}],o=E(()=>{const e=i.value;return x.map(f=>({...f,items:f.items.filter(n=>g(n.roles,e))})).filter(f=>f.items.length>0)}),p=K({}),$=E(()=>{const e={};return x.forEach(s=>s.items.forEach(f=>{f.key&&(e[f.key]=f)})),e});function _(e){return e.children?.some(s=>A(s.prefix))}function k(e){if(e in p)return;const s=$.value[e];p[e]=!!(s?.children&&_(s))}function M(e){return k(e),!!p[e]}function R(e){k(e),p[e]=!p[e]}U(()=>d.path,()=>{Object.keys($.value).forEach(e=>{const s=$.value[e];p[e]=!!(s?.children&&_(s))})},{immediate:!0});function A(e){return!!e&&(d.path===e||d.path.startsWith(e+"/"))}function r(e){const s={shield:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l8 4v6c0 5-3.5 9.74-8 10-4.5-.26-8-5-8-10V6l8-4z"/></svg>',building:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M3 21h18V3H3v18zm2-2V5h14v14H5zM7 7h4v4H7V7z"/></svg>',user:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5zm0 2c-4 0-8 2-8 6v2h16v-2c0-4-4-6-8-6z"/></svg>',layers:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 3 1 9l11 6 11-6-11-6zm0 9L1 18l11 6 11-6-11-6z"/></svg>',book:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M18 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12V2zM6 4h10v14H6a2 2 0 0 0-2 2V4z"/></svg>',chart:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M3 3h2v18H3zM8 13h2v8H8zM13 9h2v12h-2zM18 5h2v16h-2z"/></svg>',check:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"/></svg>'};return s[e]??s.layers}return(e,s)=>(u(),c("div",le,[t("div",ae,[v(L(z),{to:"/",class:"flex items-center gap-2 text-lg font-semibold"},{default:h(()=>[...s[2]||(s[2]=[t("svg",{class:"h-6 w-6",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M12 3l9 8h-3v10H6V11H3l9-8z"})],-1),t("span",null,"Edulink",-1)])]),_:1})]),t("nav",ie,[(u(!0),c(N,null,B(o.value,f=>(u(),c("div",{key:f.title,class:"space-y-2 mb-4"},[t("div",de,y(f.title),1),(u(!0),c(N,null,B(f.items,n=>(u(),c("div",{key:n.key??n.to,class:"space-y-1"},[n.children?.length?(u(),c(N,{key:0},[t("button",{type:"button",onClick:w=>R(n.key),"aria-expanded":M(n.key)?"true":"false","aria-controls":`group-${n.key}`,class:S(["w-full flex items-center justify-between px-4 h-12 rounded-2xl text-[15px] font-semibold transition-colors bg-violet-50 text-violet-700 hover:bg-violet-100 dark:bg-violet-900/30 dark:text-violet-200 dark:hover:bg-violet-900/50",_(n)?"ring-1 ring-violet-300/60 dark:ring-violet-400/30":""])},[t("span",ce,[t("span",{class:"h-5 w-5",innerHTML:r(n.icon)},null,8,pe),t("span",null,y(n.label),1)]),(u(),c("svg",{class:S(["h-5 w-5 transition-transform",{"rotate-180":M(n.key)}]),viewBox:"0 0 20 20",fill:"currentColor"},[...s[3]||(s[3]=[t("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 0 1 1.06.02L10 10.17l3.71-2.94a.75.75 0 1 1 .94 1.16l-4.24 3.36a.75.75 0 0 1-.94 0L5.21 8.39a.75.75 0 0 1 .02-1.18z","clip-rule":"evenodd"},null,-1)])],2))],10,ue),v(j,{name:"fade"},{default:h(()=>[W(t("ul",{id:`group-${n.key}`,class:"pl-6 pt-2 space-y-2"},[(u(!0),c(N,null,B(n.children,w=>(u(),c("li",{key:w.to},[v(L(z),{to:w.to,class:S(["block px-4 py-2 text-[15px] rounded-md text-slate-600 hover:text-violet-700 hover:bg-slate-100 dark:text-slate-300 dark:hover:text-violet-200 dark:hover:bg-white/5",A(w.prefix)?"text-violet-700 font-semibold dark:text-violet-200":""]),onClick:s[0]||(s[0]=Te=>e.$emit("navigate"))},{default:h(()=>[C(y(w.label),1)]),_:2},1032,["to","class"])]))),128))],8,fe),[[Y,M(n.key)]])]),_:2},1024)],64)):(u(),F(L(z),{key:1,to:n.to,class:S(["w-full flex items-center justify-between px-4 h-12 rounded-2xl text-[15px] font-semibold transition-colors bg-violet-50 text-violet-700 hover:bg-violet-100 dark:bg-violet-900/30 dark:text-violet-200 dark:hover:bg-violet-900/50",A(n.prefix)?"ring-1 ring-violet-300/60 dark:ring-violet-400/30":""]),onClick:s[1]||(s[1]=w=>e.$emit("navigate"))},{default:h(()=>[t("span",ve,[t("span",{class:"h-5 w-5",innerHTML:r(n.icon)},null,8,ge),t("span",null,y(n.label),1)]),s[4]||(s[4]=t("svg",{class:"h-5 w-5 opacity-60",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M7.22 14.28a.75.75 0 0 1 0-1.06L10.44 10 7.22 6.78a.75.75 0 1 1 1.06-1.06l3.5 3.5a.75.75 0 0 1 0 1.06l-3.5 3.5a.75.75 0 0 1-1.06 0z","clip-rule":"evenodd"})],-1))]),_:2},1032,["to","class"]))]))),128))]))),128))])]))}},P=V(me,[["__scopeId","data-v-92698d0c"]]),he=["onKeydown"],be=["aria-expanded"],xe=["onKeydown"],ye={class:"rounded-md border border-gray-200 bg-white py-1 shadow-lg ring-1 ring-black/5 dark:border-gray-700 dark:bg-gray-800"},_e={__name:"Dropdown",props:{align:{type:String,default:"right"},closeOnItemClick:{type:Boolean,default:!0}},emits:["open-change"],setup(b,{emit:d}){const a=b,i=d,l=D(!1),g=D(null),x=D(null);function o(){l.value=!l.value,$()}function p(){l.value&&(l.value=!1,i("open-change",!1))}function $(){i("open-change",l.value),l.value&&Z(M)}function _(r){g.value&&(g.value.contains(r.target)||p())}function k(){const r=x.value?.querySelectorAll("[data-dropdown-item]");return r?Array.from(r):[]}function M(){k()[0]?.focus()}function R(){const r=k();if(!r.length)return;const e=r.findIndex(s=>s===document.activeElement);r[(e+1)%r.length]?.focus()}function A(){const r=k();if(!r.length)return;const e=r.findIndex(s=>s===document.activeElement);r[(e-1+r.length)%r.length]?.focus()}return ee("dropdownClose",()=>{a.closeOnItemClick&&p()}),Q(()=>document.addEventListener("click",_)),X(()=>document.removeEventListener("click",_)),(r,e)=>(u(),c("div",{class:"relative inline-block text-left",ref_key:"root",ref:g,onKeydown:I(H(p,["stop","prevent"]),["esc"])},[t("div",{onClick:o,"aria-haspopup":"menu","aria-expanded":l.value.toString()},[O(r.$slots,"trigger",{open:l.value,toggle:o},void 0,!0)],8,be),v(j,{name:"fade-scale"},{default:h(()=>[l.value?(u(),c("div",{key:0,ref_key:"menu",ref:x,class:S(["absolute z-50 mt-2 min-w-[12rem]",b.align==="left"?"left-0":"right-0"]),role:"menu","aria-orientation":"vertical",onKeydown:[I(H(R,["prevent"]),["down"]),I(H(A,["prevent"]),["up"])]},[t("div",ye,[O(r.$slots,"default",{},void 0,!0)])],42,xe)):G("",!0)]),_:3})],40,he))}},ke=V(_e,[["__scopeId","data-v-8677d102"]]),T={__name:"DropdownItem",props:{as:{type:[String,Object],default:"button"},to:{type:[String,Object],default:null},href:{type:String,default:null},close:{type:Boolean,default:!0}},emits:["select"],setup(b,{emit:d}){const a=b,i=d,l=te("dropdownClose",null),g=E(()=>a.as==="a"&&a.href?{href:a.href}:a.to?{to:a.to}:{type:"button"});function x(o){i("select",o),a.close&&l&&l()}return(o,p)=>(u(),F(oe(b.as),se(g.value,{class:"flex w-full items-center gap-2 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 focus:bg-gray-100 focus:outline-none dark:text-gray-200 dark:hover:bg-gray-700 dark:focus:bg-gray-700",role:"menuitem","data-dropdown-item":"",onClick:x}),{default:h(()=>[O(o.$slots,"default")]),_:3},16))}},we={class:"h-16 sticky top-0 z-30 flex items-center justify-between gap-3 border-b border-gray-200 bg-white px-4 dark:border-gray-800 dark:bg-gray-900"},Ee={class:"flex items-center gap-2"},Ce={class:"flex items-center gap-2"},$e=["aria-expanded"],Me={class:"hidden sm:inline"},Ae={class:"h-6 w-6 rounded-full bg-indigo-500 inline-flex items-center justify-center text-white text-xs"},Se={__name:"Navbar",setup(b){const d=re(),a=q(),i=E(()=>a.user??{name:"Admin"}),l=E(()=>(i.value.name||"A").split(" ").map(x=>x[0]).join("").slice(0,2).toUpperCase());function g(){a.logout(),d.replace({name:"login"})}return(x,o)=>(u(),c("header",we,[t("div",Ee,[t("button",{class:"md:hidden inline-flex h-9 w-9 items-center justify-center rounded-md border border-gray-300 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:border-gray-700 dark:hover:bg-gray-800 dark:focus:ring-indigo-400",onClick:o[0]||(o[0]=p=>x.$emit("toggle-sidebar")),"aria-label":"Ouvrir le menu"},[...o[1]||(o[1]=[t("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M4 6h16v2H4v-2zm0 5h16v2H4v-2zm0 5h16v2H4v-2z"})],-1)])]),v(L(z),{to:"/",class:"md:hidden text-sm font-semibold"},{default:h(()=>[...o[2]||(o[2]=[C("Edulink",-1)])]),_:1})]),t("div",Ce,[v(ke,{align:"right"},{trigger:h(({open:p})=>[t("button",{class:"inline-flex items-center gap-2 rounded-md border border-gray-300 px-3 py-1.5 text-sm hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:border-gray-700 dark:hover:bg-gray-800 dark:focus:ring-indigo-400","aria-expanded":p.toString()},[t("span",Me,y(i.value.name),1),t("span",Ae,y(l.value),1),o[3]||(o[3]=t("svg",{class:"h-4 w-4 opacity-70",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M7 10l5 5 5-5z"})],-1))],8,$e)]),default:h(()=>[v(T,{as:"RouterLink",to:"/dashboard"},{default:h(()=>[...o[4]||(o[4]=[C("Dashboard",-1)])]),_:1}),o[6]||(o[6]=t("div",{class:"my-1 border-t border-gray-200 dark:border-gray-700"},null,-1)),v(T,{onSelect:g},{default:h(()=>[...o[5]||(o[5]=[C("Déconnexion",-1)])]),_:1})]),_:1})])]))}},Ne={class:"w-full border-t border-gray-200 bg-white px-4 py-3 text-xs text-gray-500 dark:border-gray-800 dark:bg-gray-900 dark:text-gray-400"},Le={class:"flex flex-col sm:flex-row items-center justify-between gap-2"},ze={class:"font-semibold"},De={__name:"AppFooter",props:{appName:{type:String,default:"Edulink"},version:{type:String,default:"1.0"}},setup(b){return(d,a)=>(u(),c("footer",Ne,[t("div",Le,[t("p",null,[C(" © "+y(new Date().getFullYear())+" ",1),t("span",ze,y(b.appName),1),a[0]||(a[0]=C(". Tous droits réservés. ",-1))]),t("p",null," v"+y(b.version),1)])]))}},Re={class:"min-h-screen w-full bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100"},Be={class:"flex"},Ie={class:"hidden md:block w-72 h-screen overflow-y-auto border-r border-slate-200 dark:border-slate-800 print:hidden"},He={key:0,class:"fixed inset-0 z-40 md:hidden flex print:hidden"},Oe={class:"w-72 h-screen overflow-y-auto bg-white dark:bg-slate-950 border-r border-slate-200 dark:border-slate-800"},je={class:"flex-1 min-h-screen flex flex-col"},Ve={class:"flex-1 p-4 md:p-6"},Pe={__name:"AppLayout",setup(b){const d=D(!1);return(a,i)=>{const l=ne("RouterView");return u(),c("div",Re,[t("div",Be,[t("aside",Ie,[v(P,{onNavigate:i[0]||(i[0]=g=>d.value=!1)})]),v(j,{name:"fade"},{default:h(()=>[d.value?(u(),c("div",He,[t("div",Oe,[v(P,{onNavigate:i[1]||(i[1]=g=>d.value=!1)})]),t("div",{class:"flex-1 bg-black/40",onClick:i[2]||(i[2]=g=>d.value=!1)})])):G("",!0)]),_:1}),t("div",je,[v(Se,{onToggleSidebar:i[3]||(i[3]=g=>d.value=!d.value),class:"print:hidden"}),t("main",Ve,[v(l)]),v(De,{class:"mt-auto print:hidden",appName:"Edulink",version:"1.0"})])])])}}},Ge=V(Pe,[["__scopeId","data-v-0f79825b"]]);export{Ge as default};
